-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
##### RabbitMQ
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
Port Access

SELinux and similar mechanisms may prevent RabbitMQ from binding to a port. When that happens, RabbitMQ will fail to start. Make sure the following ports can be opened:

4369 (epmd), 25672 (Erlang distribution)
5672, 5671 (AMQP 0-9-1 without and with TLS)
15672 (if management plugin is enabled)
61613, 61614 (if STOMP is enabled)
1883, 8883 (if MQTT is enabled)

-----------------------------------------------------------------------------------------------
>rabbitmq-server -detached
-----------------------------------------------------------------------------------------------
Configuration

RabbitMQ comes with default built-in settings which will most likely be sufficient for running your RabbitMQ server effectively. If it runs fine, then you probably don't need any configuration at all.

If you have other constraints, RabbitMQ provides three general ways to customise the server:

environment variables
define ports, file locations and names (taken from the shell, or set in the rabbitmq-env.conf file)
a configuration file
defines server component settings for permissions, limits and clusters, and also plugin settings.
runtime parameters and policies
defines cluster-wide settings which can change at run time
Verify Configuration
The active configuration can be verified in the broker log, e.g. the active configuration file:

>/etc/rabbitmq/rabbitmq.config

-----------------------------------------------------------------------------------------------
Customise RabbitMQ Environment

Unix (general)
On Unix-based systems (including Linux, MacOSX) you can create/edit rabbitmq-env.conf to define environment variables. Its location is not configurable (unlike rabbitmq.config).

Use the standard environment variable names (but drop the RABBITMQ_ prefix) e.g.

	+-------------------------------------------------------+
	
	#example rabbitmq-env.conf file entries
	#Rename the node
	NODENAME=bunny@myhost
	#Config file location and new filename bunnies.config
	CONFIG_FILE=/etc/rabbitmq/testdir/bunnies	
	
	+-------------------------------------------------------+
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
Location of rabbitmq.config and rabbitmq-env.conf

	+-------------------------------------------------------+
	Debian - /etc/rabbitmq/
	+-------------------------------------------------------+
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
############ Plugins #################
-----------------------------------------------------------------------------------------------
https://www.rabbitmq.com/management.html

rabbitmq-plugins enable {plugin-name}
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
++++ ERROR: node with name "rabbit" already running on
-----------------------------------------------------------------------------------------------
Kill the process with kill -9 {pid of rabbitmq process}
>ps aux | grep epmd
>ps aux | grep erl
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
++++ webmachine error: path="/api/whoami" "Unauthorized"


rabbitmqctl set_permissions -p / lhfei ".*" ".*" ".*"
rabbitmqctl set_permissions -p / lhfei "^lhfei-.*" ".*" ".*"
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------
