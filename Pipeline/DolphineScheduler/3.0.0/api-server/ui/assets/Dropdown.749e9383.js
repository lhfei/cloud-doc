import{a as N,w as ae,q as P,y as xe,v as C,d as _,z as se,A as W,j as y,h as l,bd as Se,U as ne,k as te,n as H,C as E,R as G,T as Re,aH as V,L as Ne,a2 as ke,p as U,x as A,B as $,D as Pe,be as Ce,M as F}from"./index.c5429249.js";import{N as Ke}from"./Tooltip.d759bd4b.js";import{V as Ie,a as Te,b as De,r as Oe,N as $e,p as ue}from"./Popover.df2981b4.js";import{N as _e}from"./Icon.8e3bf5ec.js";import{C as je}from"./ChevronRight.f70a9c2d.js";import{h as ze,c as Ae}from"./Selection.a106a9c5.js";import{d as Fe,p as Me,m as Be,k as Le}from"./index.3e01cddc.js";import{f as Ee}from"./fade-in-scale-up.cssr.05526022.js";import{u as He}from"./Scrollbar.12b40993.js";import{u as Ue}from"./use-keyboard.22724d1e.js";import{c as ee}from"./resolve-slot.7c241306.js";function qe(e){return t=>{t?e.value=t.$el:e.value=null}}function Ge(e,t,i){if(!t)return e;const r=N(e.value);let o=null;return ae(e,s=>{o!==null&&window.clearTimeout(o),s===!0?i&&!i.value?r.value=!0:o=window.setTimeout(()=>{r.value=!0},t):r.value=!1}),r}var Ve=P("ellipsis",{overflow:"hidden"},[xe("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),C("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),C("cursor-pointer",`
 cursor: pointer;
 `)]);function ie(e){return`${e}-ellipsis--line-clamp`}function de(e,t){return`${e}-ellipsis--cursor-${t}`}const We=Object.assign(Object.assign({},W.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}});var mo=_({name:"Ellipsis",inheritAttrs:!1,props:We,setup(e,{slots:t,attrs:i}){const{mergedClsPrefixRef:r}=se(e),o=W("Ellipsis","-ellipsis",Ve,Se,e,r),s=N(null),v=N(null),f=N(null),u=N(!1),x=y(()=>{const{lineClamp:a}=e,{value:h}=u;return a!==void 0?{textOverflow:"","-webkit-line-clamp":h?"":a}:{textOverflow:h?"":"ellipsis","-webkit-line-clamp":""}});function S(){let a=!1;const{value:h}=u;if(h)return!0;const{value:w}=s;if(w){const{lineClamp:k}=e;if(O(w),k!==void 0)a=w.scrollHeight<=w.offsetHeight;else{const{value:M}=v;M&&(a=M.getBoundingClientRect().width<=w.getBoundingClientRect().width)}I(w,a)}return a}const D=y(()=>e.expandTrigger==="click"?()=>{var a;const{value:h}=u;h&&((a=f.value)===null||a===void 0||a.setShow(!1)),u.value=!h}:void 0),K=()=>l("span",Object.assign({},ne(i,{class:[`${r.value}-ellipsis`,e.lineClamp!==void 0?ie(r.value):void 0,e.expandTrigger==="click"?de(r.value,"pointer"):void 0],style:x.value}),{ref:"triggerRef",onClick:D.value,onMouseenter:e.expandTrigger==="click"?S:void 0}),e.lineClamp?t:l("span",{ref:"triggerInnerRef"},t));function O(a){if(!a)return;const h=x.value,w=ie(r.value);e.lineClamp!==void 0?R(a,w,"add"):R(a,w,"remove");for(const k in h)a.style[k]!==h[k]&&(a.style[k]=h[k])}function I(a,h){const w=de(r.value,"pointer");e.expandTrigger==="click"&&!h?R(a,w,"add"):R(a,w,"remove")}function R(a,h,w){w==="add"?a.classList.contains(h)||a.classList.add(h):a.classList.contains(h)&&a.classList.remove(h)}return{mergedTheme:o,triggerRef:s,triggerInnerRef:v,tooltipRef:f,handleClick:D,renderTrigger:K,getTooltipDisabled:S}},render(){var e;const{tooltip:t,renderTrigger:i,$slots:r}=this;if(t){const{mergedTheme:o}=this;return l(Ke,Object.assign({ref:"tooltipRef",placement:"top"},t,{getDisabled:this.getTooltipDisabled,theme:o.peers.Tooltip,themeOverrides:o.peerOverrides.Tooltip}),{trigger:i,default:(e=r.tooltip)!==null&&e!==void 0?e:r.default})}else return i()}}),ce=_({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return l("div",{class:`${this.clsPrefix}-dropdown-divider`})}});const re=te("n-dropdown-menu"),J=te("n-dropdown"),le=te("n-dropdown-option");function oe(e,t){return e.type==="submenu"||e.type===void 0&&e[t]!==void 0}function Je(e){return e.type==="group"}function pe(e){return e.type==="divider"}function Qe(e){return e.type==="render"}var fe=_({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object},setup(e){const t=H(J),{hoverKeyRef:i,keyboardKeyRef:r,lastToggledSubmenuKeyRef:o,pendingKeyPathRef:s,activeKeyPathRef:v,animatedRef:f,mergedShowRef:u,renderLabelRef:x,renderIconRef:S,labelFieldRef:D,childrenFieldRef:K,renderOptionRef:O,nodePropsRef:I}=t,R=H(le,null),a=H(re),h=y(()=>e.tmNode.rawNode),w=y(()=>{const{value:n}=K;return oe(e.tmNode.rawNode,n)}),k=y(()=>{const{disabled:n}=e.tmNode;return n}),M=y(()=>{if(!w.value)return!1;const{key:n,disabled:p}=e.tmNode;if(p)return!1;const{value:g}=i,{value:j}=r,{value:Z}=o,{value:z}=s;return g!==null?z.includes(n):j!==null?z.includes(n)&&z[z.length-1]!==n:Z!==null?z.includes(n):!1}),Q=y(()=>r.value===null&&!f.value),X=Ge(M,300,Q),Y=y(()=>!!(R!=null&&R.enteringSubmenuRef.value)),B=N(!1);E(le,{enteringSubmenuRef:B});function L(){B.value=!0}function q(){B.value=!1}function T(){const{parentKey:n,tmNode:p}=e;!u.value||(o.value=n,r.value=null,i.value=p.key)}function d(){const{tmNode:n}=e;!u.value||i.value!==n.key&&T()}function b(n){if(!u.value)return;const{relatedTarget:p}=n;p&&!ze({target:p},"dropdownOption")&&(i.value=null)}function c(){const{value:n}=w,{tmNode:p}=e;!u.value||!n&&!p.disabled&&(t.doSelect(p.key,p.rawNode),t.doUpdateShow(!1))}return{labelField:D,renderLabel:x,renderIcon:S,siblingHasIcon:a.showIconRef,siblingHasSubmenu:a.hasSubmenuRef,animated:f,mergedShowSubmenu:y(()=>X.value&&!Y.value),rawNode:h,hasSubmenu:w,pending:G(()=>{const{value:n}=s,{key:p}=e.tmNode;return n.includes(p)}),childActive:G(()=>{const{value:n}=v,{key:p}=e.tmNode,g=n.findIndex(j=>p===j);return g===-1?!1:g<n.length-1}),active:G(()=>{const{value:n}=v,{key:p}=e.tmNode,g=n.findIndex(j=>p===j);return g===-1?!1:g===n.length-1}),mergedDisabled:k,renderOption:O,nodeProps:I,handleClick:c,handleMouseMove:d,handleMouseEnter:T,handleMouseLeave:b,handleSubmenuBeforeEnter:L,handleSubmenuAfterEnter:q}},render(){var e;const{animated:t,rawNode:i,mergedShowSubmenu:r,clsPrefix:o,siblingHasIcon:s,siblingHasSubmenu:v,renderLabel:f,renderIcon:u,renderOption:x,nodeProps:S,props:D}=this,K=r?l(ve,{clsPrefix:o,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}):null,O={class:[`${o}-dropdown-option-body`,this.pending&&`${o}-dropdown-option-body--pending`,this.active&&`${o}-dropdown-option-body--active`,this.childActive&&`${o}-dropdown-option-body--child-active`,this.mergedDisabled&&`${o}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},I=l("div",Object.assign({class:`${o}-dropdown-option`},S==null?void 0:S(i)),l("div",ne(O,D),[l("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__prefix`,s&&`${o}-dropdown-option-body__prefix--show-icon`]},[u?u(i):V(i.icon)]),l("div",{"data-dropdown-option":!0,class:`${o}-dropdown-option-body__label`},f?f(i):V((e=i[this.labelField])!==null&&e!==void 0?e:i.title)),l("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__suffix`,v&&`${o}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?l(_e,null,{default:()=>l(je,null)}):null)]),this.hasSubmenu?l(Ie,null,{default:()=>[l(Te,null,{default:()=>l("div",{class:`${o}-dropdown-offset-container`},l(De,{show:this.mergedShowSubmenu,placement:this.placement,teleportDisabled:!0},{default:()=>l("div",{class:`${o}-dropdown-menu-wrapper`},t?l(Re,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>K}):K)}))})]}):null);return x?x({node:I,option:i}):I}}),Xe=_({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:t}=H(re),{renderLabelRef:i,labelFieldRef:r,nodePropsRef:o,renderOptionRef:s}=H(J);return{labelField:r,showIcon:e,hasSubmenu:t,renderLabel:i,nodeProps:o,renderOption:s}},render(){var e;const{clsPrefix:t,hasSubmenu:i,showIcon:r,nodeProps:o,renderLabel:s,renderOption:v}=this,{rawNode:f}=this.tmNode,u=l("div",Object.assign({class:`${t}-dropdown-option`},o==null?void 0:o(f)),l("div",{class:`${t}-dropdown-option-body ${t}-dropdown-option-body--group`},l("div",{"data-dropdown-option":!0,class:[`${t}-dropdown-option-body__prefix`,r&&`${t}-dropdown-option-body__prefix--show-icon`]},V(f.icon)),l("div",{class:`${t}-dropdown-option-body__label`,"data-dropdown-option":!0},s?s(f):V((e=f.title)!==null&&e!==void 0?e:f[this.labelField])),l("div",{class:[`${t}-dropdown-option-body__suffix`,i&&`${t}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return v?v({node:u,option:f}):u}}),Ye=_({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:t,clsPrefix:i}=this,{children:r}=e;return l(ke,null,l(Xe,{clsPrefix:i,tmNode:e,key:e.key}),r==null?void 0:r.map(o=>pe(o.rawNode)?l(ce,{clsPrefix:i,key:o.key}):o.isGroup?(Ne("dropdown","`group` node is not allowed to be put in `group` node."),null):l(fe,{clsPrefix:i,tmNode:o,parentKey:t,key:o.key})))}}),Ze=_({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:t}}=this.tmNode;return l("div",t,[e==null?void 0:e()])}}),ve=_({name:"DropdownMenu",props:{showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:t,childrenFieldRef:i}=H(J);E(re,{showIconRef:y(()=>{const o=t.value;return e.tmNodes.some(s=>{var v;if(s.isGroup)return(v=s.children)===null||v===void 0?void 0:v.some(({rawNode:u})=>o?o(u):u.icon);const{rawNode:f}=s;return o?o(f):f.icon})}),hasSubmenuRef:y(()=>{const{value:o}=i;return e.tmNodes.some(s=>{var v;if(s.isGroup)return(v=s.children)===null||v===void 0?void 0:v.some(({rawNode:u})=>oe(u,o));const{rawNode:f}=s;return oe(f,o)})})});const r=N(null);return E(Be,null),E(Fe,null),E(Me,r),{bodyRef:r}},render(){const{parentKey:e,clsPrefix:t}=this;return l("div",{class:`${t}-dropdown-menu`,ref:"bodyRef"},this.tmNodes.map(i=>{const{rawNode:r}=i;return Qe(r)?l(Ze,{tmNode:i,key:i.key}):pe(r)?l(ce,{clsPrefix:t,key:i.key}):Je(r)?l(Ye,{clsPrefix:t,tmNode:i,parentKey:e,key:i.key}):l(fe,{clsPrefix:t,tmNode:i,parentKey:e,key:i.key,props:r.props})}),this.showArrow?Oe({clsPrefix:t,arrowStyle:this.arrowStyle}):null)}}),eo=P("dropdown-menu",`
 transform-origin: inherit;
 padding: var(--n-padding);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 position: relative;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[Ee(),P("dropdown-option",`
 position: relative;
 `,[U("a",`
 text-decoration: none;
 color: inherit;
 outline: none;
 `,[U("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),P("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 position: relative;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition: color .3s var(--n-bezier);
 `,[U("&::before",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 left: 4px;
 right: 4px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `),C("pending",{color:"var(--n-option-text-color-hover)"},[A("prefix, suffix",{color:"var(--n-option-text-color-hover)"}),U("&::before","background-color: var(--n-option-color-hover);")]),C("active",{color:"var(--n-option-text-color-active)"},[A("prefix, suffix",{color:"var(--n-option-text-color-active)"}),U("&::before","background-color: var(--n-option-color-active);")]),C("disabled",{cursor:"not-allowed",opacity:"var(--n-option-opacity-disabled)"}),C("child-active",{color:"var(--n-option-text-color-child-active)"},[A("prefix, suffix",{color:"var(--n-option-text-color-child-active)"})]),C("group",{fontSize:"calc(var(--n-font-size) - 1px)",color:"var(--n-group-header-text-color)"},[A("prefix",{width:"calc(var(--n-option-prefix-width) / 2)"},[C("show-icon",{width:"calc(var(--n-option-icon-prefix-width) / 2)"})])]),A("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 `,[C("show-icon",{width:"var(--n-option-icon-prefix-width)"}),P("icon",{fontSize:"var(--n-option-icon-size)"})]),A("label",`
 white-space: nowrap;
 flex: 1;
 z-index: 1;
 `),A("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 `,[C("has-submenu",{width:"var(--n-option-icon-suffix-width)"}),P("icon",{fontSize:"var(--n-option-icon-size)"})]),P("dropdown-menu","pointer-events: all;")]),P("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),P("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),P("dropdown-menu-wrapper",`
 transform-origin: inherit;
 width: fit-content;
 `)]);const oo={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},no=Object.keys(ue),to=Object.assign(Object.assign(Object.assign({},ue),oo),W.props);var wo=_({name:"Dropdown",inheritAttrs:!1,props:to,setup(e){const t=N(!1),i=He($(e,"show"),t),r=y(()=>{const{keyField:d,childrenField:b}=e;return Ae(e.options,{getKey(c){return c[d]},getDisabled(c){return c.disabled===!0},getIgnored(c){return c.type==="divider"||c.type==="render"},getChildren(c){return c[b]}})}),o=y(()=>r.value.treeNodes),s=N(null),v=N(null),f=N(null),u=y(()=>{var d,b,c;return(c=(b=(d=s.value)!==null&&d!==void 0?d:v.value)!==null&&b!==void 0?b:f.value)!==null&&c!==void 0?c:null}),x=y(()=>r.value.getPath(u.value).keyPath),S=y(()=>r.value.getPath(e.value).keyPath),D=G(()=>e.keyboard&&i.value);Ue({keydown:{ArrowUp:{prevent:!0,handler:Q},ArrowRight:{prevent:!0,handler:M},ArrowDown:{prevent:!0,handler:X},ArrowLeft:{prevent:!0,handler:k},Escape:w},keyup:{Enter:Y}},D);const{mergedClsPrefixRef:K,inlineThemeDisabled:O}=se(e),I=W("Dropdown","-dropdown",eo,Ce,e,K);E(J,{labelFieldRef:$(e,"labelField"),childrenFieldRef:$(e,"childrenField"),renderLabelRef:$(e,"renderLabel"),renderIconRef:$(e,"renderIcon"),hoverKeyRef:s,keyboardKeyRef:v,lastToggledSubmenuKeyRef:f,pendingKeyPathRef:x,activeKeyPathRef:S,animatedRef:$(e,"animated"),mergedShowRef:i,nodePropsRef:$(e,"nodeProps"),renderOptionRef:$(e,"renderOption"),doSelect:R,doUpdateShow:a}),ae(i,d=>{d||h()});function R(d,b){const{onSelect:c}=e;c&&ee(c,d,b)}function a(d){const{"onUpdate:show":b,onUpdateShow:c}=e;b&&ee(b,d),c&&ee(c,d),t.value=d}function h(){s.value=null,v.value=null,f.value=null}function w(){a(!1)}function k(){L("left")}function M(){L("right")}function Q(){L("up")}function X(){L("down")}function Y(){const d=B();d!=null&&d.isLeaf&&(R(d.key,d.rawNode),a(!1))}function B(){var d;const{value:b}=r,{value:c}=u;return!b||c===null?null:(d=b.getNode(c))!==null&&d!==void 0?d:null}function L(d){const{value:b}=u,{value:{getFirstAvailableNode:c}}=r;let n=null;if(b===null){const p=c();p!==null&&(n=p.key)}else{const p=B();if(p){let g;switch(d){case"down":g=p.getNext();break;case"up":g=p.getPrev();break;case"right":g=p.getChild();break;case"left":g=p.getParent();break}g&&(n=g.key)}}n!==null&&(s.value=null,v.value=n)}const q=y(()=>{const{size:d,inverted:b}=e,{common:{cubicBezierEaseInOut:c},self:n}=I.value,{padding:p,dividerColor:g,borderRadius:j,optionOpacityDisabled:Z,[F("optionIconSuffixWidth",d)]:z,[F("optionSuffixWidth",d)]:he,[F("optionIconPrefixWidth",d)]:me,[F("optionPrefixWidth",d)]:we,[F("fontSize",d)]:be,[F("optionHeight",d)]:ye,[F("optionIconSize",d)]:ge}=n,m={"--n-bezier":c,"--n-font-size":be,"--n-padding":p,"--n-border-radius":j,"--n-option-height":ye,"--n-option-prefix-width":we,"--n-option-icon-prefix-width":me,"--n-option-suffix-width":he,"--n-option-icon-suffix-width":z,"--n-option-icon-size":ge,"--n-divider-color":g,"--n-option-opacity-disabled":Z};return b?(m["--n-color"]=n.colorInverted,m["--n-option-color-hover"]=n.optionColorHoverInverted,m["--n-option-color-active"]=n.optionColorActiveInverted,m["--n-option-text-color"]=n.optionTextColorInverted,m["--n-option-text-color-hover"]=n.optionTextColorHoverInverted,m["--n-option-text-color-active"]=n.optionTextColorActiveInverted,m["--n-option-text-color-child-active"]=n.optionTextColorChildActiveInverted,m["--n-prefix-color"]=n.prefixColorInverted,m["--n-suffix-color"]=n.suffixColorInverted,m["--n-group-header-text-color"]=n.groupHeaderTextColorInverted):(m["--n-color"]=n.color,m["--n-option-color-hover"]=n.optionColorHover,m["--n-option-color-active"]=n.optionColorActive,m["--n-option-text-color"]=n.optionTextColor,m["--n-option-text-color-hover"]=n.optionTextColorHover,m["--n-option-text-color-active"]=n.optionTextColorActive,m["--n-option-text-color-child-active"]=n.optionTextColorChildActive,m["--n-prefix-color"]=n.prefixColor,m["--n-suffix-color"]=n.suffixColor,m["--n-group-header-text-color"]=n.groupHeaderTextColor),m}),T=O?Pe("dropdown",y(()=>`${e.size[0]}${e.inverted?"i":""}`),q,e):void 0;return{mergedClsPrefix:K,mergedTheme:I,tmNodes:o,mergedShow:i,doUpdateShow:a,cssVars:O?void 0:q,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender}},render(){const e=(r,o,s,v,f)=>{var u;const{mergedClsPrefix:x}=this;(u=this.onRender)===null||u===void 0||u.call(this);const S={ref:qe(o),class:[r,`${x}-dropdown`,this.themeClass],clsPrefix:x,tmNodes:this.tmNodes,style:[s,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,onMouseenter:v,onMouseleave:f};return l(ve,ne(this.$attrs,S))},{mergedTheme:t}=this,i={show:this.mergedShow,theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,internalRenderBody:e,onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return l($e,Object.assign({},Le(this.$props,no),i),{trigger:()=>{var r,o;return(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r)}})}});export{wo as N,mo as a,qe as c};
