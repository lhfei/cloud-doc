import{d,bB as B,bz as z,bA as b,u as Q,a as J,C as K,j as W,w as G,c as U,bl as $,H as Y,h as A}from"./index.c5429249.js";import{M as X}from"./index.20e11ec3.js";import Z from"./detail.d1a94623.js";import{l as C}from"./lodash.084a01e7.js";import{T as ee}from"./task-type.1f698d1a.js";import{q as re}from"./index.31c70196.js";import{u as te}from"./task-node.0b2752c6.js";import{H as se}from"./common.145f2eef.js";import{P as ie}from"./ProfileOutlined.be3098c4.js";import{N as oe}from"./Icon.8e3bf5ec.js";const ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ae=b("path",{d:"M740 161c-61.8 0-112 50.2-112 112c0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1c0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1c0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0 0 34.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2c0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0 1 96 0a48.01 48.01 0 0 1-96 0zm96 600a48.01 48.01 0 0 1-96 0a48.01 48.01 0 0 1 96 0zm408-491a48.01 48.01 0 0 1 0-96a48.01 48.01 0 0 1 0 96z",fill:"currentColor"},null,-1),ce=[ae];var le=d({name:"BranchesOutlined",render:function(r,i){return B(),z("svg",ne,ce)}});const me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ue=b("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z","fill-opacity":".8",fill:"currentColor"},null,-1),pe=b("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372s372-166.6 372-372s-166.6-372-372-372zm0 632c-22.1 0-40-17.9-40-40s17.9-40 40-40s40 17.9 40 40s-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 0 0-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9c12.9-18.6 30.9-32.8 52.1-40.9c34-13.1 56-41.6 56-72.7c0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z","fill-opacity":".1",fill:"currentColor"},null,-1),ye=b("path",{d:"M472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0zm151.6-415.3C593.6 290.5 554 276 512 276s-81.6 14.4-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.2 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c0-39.3-17.2-76-48.4-103.3z","fill-opacity":".8",fill:"currentColor"},null,-1),fe=[ue,pe,ye];var ge=d({name:"QuestionCircleTwotone",render:function(r,i){return B(),z("svg",me,fe)}});function Ne(e){var a,p,c,o,u;const r={};if(e.taskType==="SUB_PROCESS"&&(r.processDefinitionCode=e.processDefinitionCode),(e.taskType==="SPARK"||e.taskType==="MR"||e.taskType==="FLINK")&&(r.programType=e.programType,r.mainClass=e.mainClass,e.mainJar&&(r.mainJar={id:e.mainJar}),r.deployMode=e.deployMode,r.appName=e.appName,r.mainArgs=e.mainArgs,r.others=e.others),e.taskType==="SPARK"&&(r.sparkVersion=e.sparkVersion,r.driverCores=e.driverCores,r.driverMemory=e.driverMemory,r.numExecutors=e.numExecutors,r.executorMemory=e.executorMemory,r.executorCores=e.executorCores),e.taskType==="FLINK"&&(r.flinkVersion=e.flinkVersion,r.jobManagerMemory=e.jobManagerMemory,r.taskManagerMemory=e.taskManagerMemory,r.slot=e.slot,r.taskManager=e.taskManager,r.parallelism=e.parallelism),e.taskType==="HTTP"&&(r.httpMethod=e.httpMethod,r.httpCheckCondition=e.httpCheckCondition,r.httpParams=e.httpParams,r.url=e.url,r.condition=e.condition,r.connectTimeout=e.connectTimeout,r.socketTimeout=e.socketTimeout),e.taskType==="SQOOP")if(r.jobType=e.isCustomTask?"CUSTOM":"TEMPLATE",r.localParams=e.localParams,e.isCustomTask)r.customShell=e.customShell;else{r.jobName=e.jobName,r.hadoopCustomParams=e.hadoopCustomParams,r.sqoopAdvancedParams=e.sqoopAdvancedParams,r.concurrency=e.concurrency,r.modelType=e.modelType,r.sourceType=e.sourceType,r.targetType=e.targetType;let s={},n={};switch(e.targetType){case"HIVE":s={hiveDatabase:e.targetHiveDatabase,hiveTable:e.targetHiveTable,createHiveTable:e.targetHiveCreateTable,dropDelimiter:e.targetHiveDropDelimiter,hiveOverWrite:e.targetHiveOverWrite,hiveTargetDir:e.targetHiveTargetDir,replaceDelimiter:e.targetHiveReplaceDelimiter,hivePartitionKey:e.targetHivePartitionKey,hivePartitionValue:e.targetHivePartitionValue};break;case"HDFS":s={targetPath:e.targetHdfsTargetPath,deleteTargetDir:e.targetHdfsDeleteTargetDir,compressionCodec:e.targetHdfsCompressionCodec,fileType:e.targetHdfsFileType,fieldsTerminated:e.targetHdfsFieldsTerminated,linesTerminated:e.targetHdfsLinesTerminated};break;case"MYSQL":s={targetType:e.targetMysqlType,targetDatasource:e.targetMysqlDatasource,targetTable:e.targetMysqlTable,targetColumns:e.targetMysqlColumns,fieldsTerminated:e.targetMysqlFieldsTerminated,linesTerminated:e.targetMysqlLinesTerminated,isUpdate:e.targetMysqlIsUpdate,targetUpdateKey:e.targetMysqlTargetUpdateKey,targetUpdateMode:e.targetMysqlUpdateMode};break}switch(e.sourceType){case"MYSQL":n={srcTable:e.srcQueryType==="1"?"":e.srcTable,srcColumnType:e.srcQueryType==="1"?"0":e.srcColumnType,srcColumns:e.srcQueryType==="1"||e.srcColumnType==="0"?"":e.srcColumns,srcQuerySql:e.srcQueryType==="0"?"":e.sourceMysqlSrcQuerySql,srcQueryType:e.srcQueryType,srcType:e.sourceMysqlType,srcDatasource:e.sourceMysqlDatasource,mapColumnHive:e.mapColumnHive,mapColumnJava:e.mapColumnJava};break;case"HDFS":n={exportDir:e.sourceHdfsExportDir};break;case"HIVE":n={hiveDatabase:e.sourceHiveDatabase,hiveTable:e.sourceHiveTable,hivePartitionKey:e.sourceHivePartitionKey,hivePartitionValue:e.sourceHivePartitionValue};break}r.targetParams=JSON.stringify(s),r.sourceParams=JSON.stringify(n)}if(e.taskType==="SQL"&&(r.type=e.type,r.datasource=e.datasource,r.sql=e.sql,r.sqlType=e.sqlType,r.preStatements=e.preStatements,r.postStatements=e.postStatements,r.segmentSeparator=e.segmentSeparator,r.sendEmail=e.sendEmail,r.displayRows=e.displayRows,e.sqlType==="0"&&e.sendEmail&&(r.title=e.title,r.groupId=e.groupId),e.type==="HIVE"&&(e.udfs&&(r.udfs=e.udfs.join(",")),r.connParams=e.connParams)),e.taskType==="PROCEDURE"&&(r.type=e.type,r.datasource=e.datasource,r.method=e.method),e.taskType==="SEATUNNEL"&&(e.deployMode==="local"&&(e.master="local",e.masterUrl="",e.deployMode="client"),ke(e)),e.taskType==="SWITCH"&&(r.switchResult={},r.switchResult.dependTaskList=e.dependTaskList,r.switchResult.nextNode=e.nextNode),e.taskType==="CONDITIONS"&&(r.dependence={relation:e.relation,dependTaskList:e.dependTaskList},r.conditionResult={},e.successBranch&&(r.conditionResult.successNode=[e.successBranch]),e.failedBranch&&(r.conditionResult.failedNode=[e.failedBranch])),e.taskType==="DATAX"&&(r.customConfig=e.customConfig?1:0,r.customConfig===0?(r.dsType=e.dsType,r.dataSource=e.dataSource,r.dtType=e.dtType,r.dataTarget=e.dataTarget,r.sql=e.sql,r.targetTable=e.targetTable,r.jobSpeedByte=e.jobSpeedByte,r.jobSpeedRecord=e.jobSpeedRecord,r.preStatements=e.preStatements,r.postStatements=e.postStatements):(r.json=e.json,(a=e==null?void 0:e.localParams)==null||a.map(s=>{s.direct="IN",s.type="VARCHAR"})),r.xms=e.xms,r.xmx=e.xmx),e.taskType==="DEPENDENT"){const s=(p=C.exports.cloneDeep(e.dependTaskList))==null?void 0:p.map(n=>{var m;return(m=n.dependItemList)!=null&&m.length&&n.dependItemList.forEach(y=>{delete y.definitionCodeOptions,delete y.depTaskCodeOptions,delete y.dateOptions}),n});r.dependence={relation:e.relation,dependTaskList:s}}e.taskType==="DATA_QUALITY"&&(r.ruleId=e.ruleId,r.ruleInputParameter={check_type:e.check_type,comparison_execute_sql:e.comparison_execute_sql,comparison_type:e.comparison_type,comparison_name:e.comparison_name,failure_strategy:e.failure_strategy,operator:e.operator,src_connector_type:e.src_connector_type,src_datasource_id:e.src_datasource_id,field_length:e.field_length,begin_time:e.begin_time,deadline:e.deadline,datetime_format:e.datetime_format,enum_list:e.enum_list,regexp_pattern:e.regexp_pattern,target_filter:e.target_filter,src_filter:e.src_filter,src_field:e.src_field,src_table:e.src_table,statistics_execute_sql:e.statistics_execute_sql,statistics_name:e.statistics_name,target_connector_type:e.target_connector_type,target_datasource_id:e.target_datasource_id,target_table:e.target_table,threshold:e.threshold,mapping_columns:JSON.stringify(e.mapping_columns)},r.sparkParameters={deployMode:e.deployMode,driverCores:e.driverCores,driverMemory:e.driverMemory,executorCores:e.executorCores,executorMemory:e.executorMemory,numExecutors:e.numExecutors,others:e.others}),e.taskType==="EMR"&&(r.type=e.type,r.jobFlowDefineJson=e.jobFlowDefineJson),e.taskType==="ZEPPELIN"&&(r.noteId=e.noteId,r.paragraphId=e.paragraphId),e.taskType==="PIGEON"&&(r.targetJobName=e.targetJobName);let i="";e.timeoutNotifyStrategy&&(e.timeoutNotifyStrategy.length===1&&(i=e.timeoutNotifyStrategy[0]),e.timeoutNotifyStrategy.length===2&&(i="WARNFAILED"));const l={processDefinitionCode:e.processName?String(e.processName):"",upstreamCodes:(c=e==null?void 0:e.preTasks)==null?void 0:c.join(","),taskDefinitionJsonObj:{code:e.code,delayTime:e.delayTime?String(e.delayTime):"0",description:e.description,environmentCode:e.environmentCode||-1,failRetryInterval:e.failRetryInterval?String(e.failRetryInterval):"0",failRetryTimes:e.failRetryTimes?String(e.failRetryTimes):"0",flag:e.flag,name:e.name,taskGroupId:e.taskGroupId,taskGroupPriority:e.taskGroupPriority,taskParams:{localParams:(o=e.localParams)==null?void 0:o.map(s=>(s.value=s.value||"",s)),initScript:e.initScript,rawScript:e.rawScript,resourceList:(u=e.resourceList)!=null&&u.length?e.resourceList.map(s=>({id:s})):[],...r},taskPriority:e.taskPriority,taskType:e.taskType,timeout:e.timeoutFlag?e.timeout:0,timeoutFlag:e.timeoutFlag?"OPEN":"CLOSE",timeoutNotifyStrategy:e.timeoutFlag?i:"",workerGroup:e.workerGroup}};return e.timeoutFlag||(l.taskDefinitionJsonObj.timeout=0,l.taskDefinitionJsonObj.timeoutNotifyStrategy=""),l}function Pe(e){var i,l,a,p,c,o,u,s,n,m,y,h,g,f,T,P,k,v,_,S,M,I,w,D,N,x,H,q,L,R,E,O,j,V,F;const r={...C.exports.omit(e,["environmentCode","timeoutFlag","timeoutNotifyStrategy","taskParams"]),...C.exports.omit(e.taskParams,["resourceList","mainJar","localParams"]),environmentCode:e.environmentCode===-1?null:e.environmentCode,timeoutFlag:e.timeoutFlag==="OPEN",timeoutNotifyStrategy:e.timeoutNotifyStrategy?[e.timeoutNotifyStrategy]:[],localParams:((i=e.taskParams)==null?void 0:i.localParams)||[]};if(e.timeoutNotifyStrategy==="WARNFAILED"&&(r.timeoutNotifyStrategy=["WARN","FAILED"]),(l=e.taskParams)!=null&&l.resourceList&&(r.resourceList=e.taskParams.resourceList.map(t=>t.id)),(a=e.taskParams)!=null&&a.mainJar&&(r.mainJar=(p=e.taskParams)==null?void 0:p.mainJar.id),(c=e.taskParams)!=null&&c.method&&(r.method=(o=e.taskParams)==null?void 0:o.method),(u=e.taskParams)!=null&&u.targetParams){const t=JSON.parse(e.taskParams.targetParams);r.targetHiveDatabase=t.hiveDatabase,r.targetHiveTable=t.hiveTable,r.targetHiveCreateTable=t.createHiveTable,r.targetHiveDropDelimiter=t.dropDelimiter,r.targetHiveOverWrite=t.hiveOverWrite===void 0?!0:t.hiveOverWrite,r.targetHiveTargetDir=t.hiveTargetDir,r.targetHiveReplaceDelimiter=t.replaceDelimiter,r.targetHivePartitionKey=t.hivePartitionKey,r.targetHivePartitionValue=t.hivePartitionValue,r.targetHdfsTargetPath=t.targetPath,r.targetHdfsDeleteTargetDir=t.deleteTargetDir===void 0?!0:t.deleteTargetDir,r.targetHdfsCompressionCodec=t.compressionCodec===void 0?"snappy":t.compressionCodec,r.targetHdfsFileType=t.fileType===void 0?"--as-avrodatafile":t.fileType,r.targetHdfsFieldsTerminated=t.fieldsTerminated,r.targetHdfsLinesTerminated=t.linesTerminated,r.targetMysqlType=t.targetType,r.targetMysqlDatasource=t.targetDatasource,r.targetMysqlTable=t.targetTable,r.targetMysqlColumns=t.targetColumns,r.targetMysqlFieldsTerminated=t.fieldsTerminated,r.targetMysqlLinesTerminated=t.linesTerminated,r.targetMysqlIsUpdate=t.isUpdate,r.targetMysqlTargetUpdateKey=t.targetUpdateKey,r.targetMysqlUpdateMode=t.targetUpdateMode===void 0?"allowinsert":t.targetUpdateMode}if((s=e.taskParams)!=null&&s.sourceParams){const t=JSON.parse(e.taskParams.sourceParams);r.srcTable=t.srcTable,r.srcColumnType=t.srcColumnType,r.srcColumns=t.srcColumns,r.sourceMysqlSrcQuerySql=t.srcQuerySql,r.srcQueryType=t.srcQueryType,r.sourceMysqlType=t.srcType,r.sourceMysqlDatasource=t.srcDatasource,r.mapColumnHive=t.mapColumnHive||[],r.mapColumnJava=t.mapColumnJava||[],r.sourceHdfsExportDir=t.exportDir,r.sourceHiveDatabase=t.hiveDatabase,r.sourceHiveTable=t.hiveTable,r.sourceHivePartitionKey=t.hivePartitionKey,r.sourceHivePartitionValue=t.hivePartitionValue}return(n=e.taskParams)!=null&&n.rawScript&&(r.rawScript=(m=e.taskParams)==null?void 0:m.rawScript),(y=e.taskParams)!=null&&y.initScript&&(r.initScript=(h=e.taskParams)==null?void 0:h.initScript),(g=e.taskParams)!=null&&g.switchResult&&(r.switchResult=e.taskParams.switchResult,r.dependTaskList=(f=e.taskParams.switchResult)!=null&&f.dependTaskList?(T=e.taskParams.switchResult)==null?void 0:T.dependTaskList:[],r.nextNode=(P=e.taskParams.switchResult)==null?void 0:P.nextNode),(k=e.taskParams)!=null&&k.dependence&&(r.dependTaskList=((v=e.taskParams)==null?void 0:v.dependence.dependTaskList)||[],r.relation=(_=e.taskParams)==null?void 0:_.dependence.relation),(S=e.taskParams)!=null&&S.ruleInputParameter&&(r.check_type=e.taskParams.ruleInputParameter.check_type,r.comparison_execute_sql=e.taskParams.ruleInputParameter.comparison_execute_sql,r.comparison_type=e.taskParams.ruleInputParameter.comparison_type,r.comparison_name=e.taskParams.ruleInputParameter.comparison_name,r.failure_strategy=e.taskParams.ruleInputParameter.failure_strategy,r.operator=e.taskParams.ruleInputParameter.operator,r.src_connector_type=e.taskParams.ruleInputParameter.src_connector_type,r.src_datasource_id=e.taskParams.ruleInputParameter.src_datasource_id,r.src_table=e.taskParams.ruleInputParameter.src_table,r.field_length=e.taskParams.ruleInputParameter.field_length,r.begin_time=e.taskParams.ruleInputParameter.begin_time,r.deadline=e.taskParams.ruleInputParameter.deadline,r.datetime_format=e.taskParams.ruleInputParameter.datetime_format,r.target_filter=e.taskParams.ruleInputParameter.target_filter,r.regexp_pattern=e.taskParams.ruleInputParameter.regexp_pattern,r.enum_list=e.taskParams.ruleInputParameter.enum_list,r.src_filter=e.taskParams.ruleInputParameter.src_filter,r.src_field=e.taskParams.ruleInputParameter.src_field,r.statistics_execute_sql=e.taskParams.ruleInputParameter.statistics_execute_sql,r.statistics_name=e.taskParams.ruleInputParameter.statistics_name,r.target_connector_type=e.taskParams.ruleInputParameter.target_connector_type,r.target_datasource_id=e.taskParams.ruleInputParameter.target_datasource_id,r.target_table=e.taskParams.ruleInputParameter.target_table,r.threshold=e.taskParams.ruleInputParameter.threshold,e.taskParams.ruleInputParameter.mapping_columns&&(r.mapping_columns=JSON.parse(e.taskParams.ruleInputParameter.mapping_columns))),(M=e.taskParams)!=null&&M.sparkParameters&&(r.deployMode=e.taskParams.sparkParameters.deployMode,r.driverCores=e.taskParams.sparkParameters.driverCores,r.driverMemory=e.taskParams.sparkParameters.driverMemory,r.executorCores=e.taskParams.sparkParameters.executorCores,r.executorMemory=e.taskParams.sparkParameters.executorMemory,r.numExecutors=e.taskParams.sparkParameters.numExecutors,r.others=e.taskParams.sparkParameters.others),(I=e.taskParams)!=null&&I.jobFlowDefineJson&&(r.jobFlowDefineJson=e.taskParams.jobFlowDefineJson),(w=e.taskParams)!=null&&w.zeppelinNoteId&&(r.zeppelinNoteId=e.taskParams.zeppelinNoteId),(D=e.taskParams)!=null&&D.zeppelinParagraphId&&(r.zeppelinParagraphId=e.taskParams.zeppelinParagraphId),(N=e.taskParams)!=null&&N.processDefinitionCode&&(r.processDefinitionCode=e.taskParams.processDefinitionCode),(q=(H=(x=e.taskParams)==null?void 0:x.conditionResult)==null?void 0:H.successNode)!=null&&q.length&&(r.successBranch=e.taskParams.conditionResult.successNode[0]),(E=(R=(L=e.taskParams)==null?void 0:L.conditionResult)==null?void 0:R.failedNode)!=null&&E.length&&(r.failedBranch=e.taskParams.conditionResult.failedNode[0]),(O=e.taskParams)!=null&&O.udfs&&(r.udfs=(j=e.taskParams.udfs)==null?void 0:j.split(",")),((V=e.taskParams)==null?void 0:V.customConfig)!==void 0&&(r.customConfig=e.taskParams.customConfig===1),(F=e.taskParams)!=null&&F.jobType&&(r.isCustomTask=e.taskParams.jobType==="CUSTOM"),r}const ke=e=>{var u,s;const r="sh ${WATERDROP_HOME}/bin/start-waterdrop.sh";if(!e.resourceList)return;let i=e.master,l=e!=null&&e.masterUrl?e==null?void 0:e.masterUrl:"",a=e.deployMode;const p=e.queue;e.deployMode==="local"&&(i="local",l="",a="client"),(i==="yarn"||i==="local")&&(l="");let c="";(u=e==null?void 0:e.localParams)==null||u.forEach(n=>{c=c+" --variable "+n.prop+"="+n.value});let o="";(s=e.resourceList)==null||s.forEach(n=>{const m=C.exports.find(e.resourceFiles,{id:n});o=o+r+" --master "+i+l+" --deploy-mode "+a+" --queue "+p,m&&m.fullName&&(o=o+" --config "+m.fullName),o=o+c+` 
`}),e.rawScript=o||""},Te={show:{type:Boolean,default:!1},data:{type:Object,default:{code:0,taskType:"SHELL",name:""}},projectCode:{type:Number,required:!0,default:0},readonly:{type:Boolean,default:!1},from:{type:Number,default:0},definition:{type:Object},processInstance:{type:Object},taskInstance:{type:Object},saving:{type:Boolean,default:!1}},_e=d({name:"NodeDetailModal",props:Te,emits:["cancel","submit","viewLog"],setup(e,{emit:r}){const{t:i,locale:l}=Q(),a=$(),p=te(),c=g=>()=>A(oe,null,{default:()=>A(g)}),o=J(),u=async()=>{await o.value.value.validate(),r("submit",{data:o.value.value.getValues()})},s=()=>{r("cancel")},n=J([]),m=()=>{e.taskInstance&&r("viewLog",e.taskInstance.id,e.taskInstance.taskType)},y=(g,f)=>{var T;n.value=[{text:i("project.node.instructions"),show:!!(f&&!((T=ee[f])!=null&&T.helperLinkDisable)),action:()=>{let P=f==null?void 0:f.toLowerCase().replace("_","-");f==="PROCEDURE"&&(P="stored-procedure");const k="https://dolphinscheduler.apache.org/"+l.value.toLowerCase().replace("_","-")+"/docs/latest/user_doc/guide/task/"+P+".html";window.open(k)},icon:c(ge)},{text:i("project.node.view_history"),show:!!e.taskInstance,action:()=>{a.push({name:"task-instance",params:{processInstanceId:g.id}})},icon:c(se)},{text:i("project.node.view_log"),show:!!e.taskInstance,action:()=>{m()},icon:c(ie)},{text:i("project.node.enter_this_child_node"),show:e.data.taskType==="SUB_PROCESS",disabled:!e.data.id||a.currentRoute.value.name==="workflow-instance-detail"&&!e.taskInstance,action:()=>{var P,k;a.currentRoute.value.name==="workflow-instance-detail"?re({taskId:(P=e.taskInstance)==null?void 0:P.id},{projectCode:e.projectCode}).then(v=>{var _;a.push({name:"workflow-instance-detail",params:{id:v.subProcessInstanceId},query:{code:(_=e.data.taskParams)==null?void 0:_.processDefinitionCode}})}):a.push({name:"workflow-definition-detail",params:{code:(k=e.data.taskParams)==null?void 0:k.processDefinitionCode}})},icon:c(le)}]},h=g=>{e.data.taskType=g,y(e.processInstance,e.data.taskType)};return K("data",W(()=>({projectCode:e.projectCode,data:e.data,from:e.from,readonly:e.readonly,definition:e.definition}))),G(()=>[e.show,e.data],async()=>{!e.show||(y(e.processInstance,e.data.taskType),p.init(),await Y(),o.value.value.setValues(Pe(e.data)))}),()=>U(X,{show:e.show,title:e.from===1?`${i("project.task.current_task_settings")}`:`${i("project.node.current_node_settings")}`,onConfirm:u,confirmLoading:e.saving,confirmDisabled:e.readonly,onCancel:s,headerLinks:n},{default:()=>[U(Z,{ref:o,onTaskTypeChange:h,key:e.data.taskType},null)]})}});var xe=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{_e as N,xe as d,Ne as f};
