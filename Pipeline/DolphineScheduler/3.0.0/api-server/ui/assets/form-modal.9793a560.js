import{u as d,r as _,a as c,d as g,o as h,t as D,c as r}from"./index.c5429249.js";import{M as v}from"./index.20e11ec3.js";import{u as j,c as k}from"./index.bbd47aff.js";import{e as C}from"./index.bbb6cfa3.js";import{N as z}from"./Form.13999875.js";import{N as s}from"./FormItem.51e71cc3.js";import{N as l}from"./Input.97d5419b.js";import{a as S}from"./Select.e833ee40.js";import{N as b}from"./InputNumber.d8a1dfa4.js";import"./index.3b9f9e63.js";import"./Button.c43a24dc.js";import"./is-browser.d3e5def6.js";import"./use-rtl.c78ffbd8.js";import"./resolve-slot.7c241306.js";import"./keysOf.963e6f6c.js";import"./Card.c707a1eb.js";import"./index.16077d24.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./fade-in-scale-up.cssr.05526022.js";import"./utils.3eee947a.js";import"./Space.e50db48f.js";import"./get-slot.c85d6606.js";import"./service.0215c8a4.js";import"./lodash.084a01e7.js";import"./format-length.e7c2072e.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";import"./use-compitable.b0459e69.js";import"./Selection.a106a9c5.js";import"./Popover.df2981b4.js";import"./next-frame-once.da993024.js";import"./Add.e846b00c.js";function N(){const{t}=d(),o=_({formRef:c(),formData:{id:0,name:"",projectCode:null,groupSize:"",status:1,description:""},saving:!1,rules:{name:{required:!0,trigger:["input","blur"],validator(){if(!o.formData.name)return new Error(t("resource.task_group_option.please_enter_name"))}},groupSize:{required:!0,trigger:["input","blur"],validator(){if(!o.formData.groupSize)return new Error(t("resource.task_group_option.please_enter_resource_pool_size"));if(!/^[1-9]\d*$/.test(o.formData.groupSize))return new Error(t("resource.task_group_option.resource_pool_size")+t("resource.task_group_option.positive_integer_tips"))}},projectCode:{required:!0,trigger:["input","blur"],validator(){if(!o.formData.projectCode)return new Error(t("resource.task_group_option.please_select_project"))}}}});return{state:o,t}}const w={show:{type:Boolean,default:!1},data:{type:Object},status:{type:Number,default:0}},mt=g({name:"FormModal",props:w,emits:["confirm","cancel"],setup(t,{emit:o}){const{state:e,t:p}=N(),i=c([]);h(()=>{C().then(u=>{u.map(m=>{const f={label:m.name,value:m.code};i.value.push(f)})}),t.status===1?(e.formData.id=t.data.id,e.formData.name=t.data.name,e.formData.projectCode=t.data.projectCode,e.formData.groupSize=String(t.data.groupSize),e.formData.status=t.data.status,e.formData.description=t.data.description):e.formData.groupSize="10"});const n=async()=>{if(!e.saving){e.saving=!0;try{t.status===1?await j(e.formData):await k(e.formData),e.saving=!1,o("confirm")}catch{e.saving=!1}}},a=()=>{e.formData.projectCode="",e.formData.description="",o("cancel")};return{...D(e),t:p,onConfirm:n,onCancel:a,projectOptions:i}},render(){const{t,onConfirm:o,onCancel:e,show:p,status:i,projectOptions:n}=this;return r(v,{title:t(i===0?"resource.task_group_option.create":"resource.task_group_option.edit"),show:p,onConfirm:o,onCancel:e,confirmDisabled:!this.formData.name||!this.formData.groupSize||!this.formData.projectCode,confirmLoading:this.saving},{default:()=>[r(z,{rules:this.rules,ref:"formRef"},{default:()=>[r(s,{label:t("resource.task_group_option.name"),path:"name"},{default:()=>[r(l,{value:this.formData.name,"onUpdate:value":a=>this.formData.name=a,placeholder:t("resource.task_group_option.please_enter_name")},null)]}),this.status===0&&r(s,{label:t("resource.task_group_option.project_name"),path:"projectCode"},{default:()=>[r(S,{options:n,value:this.formData.projectCode,"onUpdate:value":a=>this.formData.projectCode=a,placeholder:t("resource.task_group_option.please_select_project")},null)]}),r(s,{label:t("resource.task_group_option.resource_pool_size"),path:"groupSize"},{default:()=>[r(b,{value:this.formData.groupSize,"onUpdate:value":a=>this.formData.groupSize=a,style:{width:"100%"},min:1,placeholder:t("resource.task_group_option.please_enter_resource_pool_size")},null)]}),r(s,{label:t("resource.task_group_option.desc"),path:"description"},{default:()=>[r(l,{value:this.formData.description,"onUpdate:value":a=>this.formData.description=a,type:"textarea",placeholder:t("resource.task_group_option.please_enter_desc")},null)]})]})]})}});export{mt as default};
