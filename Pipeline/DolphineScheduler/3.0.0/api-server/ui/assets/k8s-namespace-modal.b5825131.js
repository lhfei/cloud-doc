import{M as I}from"./index.20e11ec3.js";import{q as L,x as K,d as k,z as V,A as _,j as p,D as U,h,az as E,M as f,u as y,r as F,a as i,w as g,t as G,c as s,ae as b}from"./index.c5429249.js";import{v as O,c as S,u as T}from"./index.e24493be.js";import{N as v}from"./InputGroup.dbcafa91.js";import{N as j}from"./Form.13999875.js";import{N as n}from"./FormItem.51e71cc3.js";import{N as m}from"./Input.97d5419b.js";import"./index.3b9f9e63.js";import"./Button.c43a24dc.js";import"./is-browser.d3e5def6.js";import"./use-rtl.c78ffbd8.js";import"./resolve-slot.7c241306.js";import"./keysOf.963e6f6c.js";import"./Card.c707a1eb.js";import"./index.16077d24.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./fade-in-scale-up.cssr.05526022.js";import"./utils.3eee947a.js";import"./Space.e50db48f.js";import"./get-slot.c85d6606.js";import"./service.0215c8a4.js";import"./lodash.084a01e7.js";import"./format-length.e7c2072e.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";var P=L("input-group-label",`
 position: relative;
 user-select: none;
 box-sizing: border-box;
 padding: 0 12px;
 display: inline-block;
 border-radius: var(--n-border-radius);
 background-color: var(--n-group-label-color);
 color: var(--n-group-label-text-color);
 font-size: var(--n-font-size);
 line-height: var(--n-height);
 height: var(--n-height);
 flex-shrink: 0;
 white-space: nowrap;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[K("border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-group-label-border);
 transition: border-color .3s var(--n-bezier);
 `)]);const q=Object.assign(Object.assign({},_.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:void 0}});var w=k({name:"InputGroupLabel",props:q,setup(e){const{mergedBorderedRef:o,mergedClsPrefixRef:a,inlineThemeDisabled:t}=V(e),d=_("Input","-input-group-label",P,E,e,a),r=p(()=>{const{size:u}=e,{common:{cubicBezierEaseInOut:c},self:{groupLabelColor:M,borderRadius:C,groupLabelTextColor:R,lineHeight:N,groupLabelBorder:z,[f("fontSize",u)]:x,[f("height",u)]:B}}=d.value;return{"--n-bezier":c,"--n-group-label-color":M,"--n-group-label-border":z,"--n-border-radius":C,"--n-group-label-text-color":R,"--n-font-size":x,"--n-line-height":N,"--n-height":B}}),l=t?U("input-group-label",p(()=>e.size[0]),r,e):void 0;return{mergedClsPrefix:a,mergedBordered:o,cssVars:t?void 0:r,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){var e,o,a;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h("div",{class:[`${t}-input-group-label`,this.themeClass],style:this.cssVars},(a=(o=this.$slots).default)===null||a===void 0?void 0:a.call(o),this.mergedBordered?h("div",{class:`${t}-input-group-label__border`}):null)}});function D(e,o){const{t:a}=y(),t=F({k8sNamespaceFormRef:i(),model:{id:i(-1),namespace:i(""),k8s:i(""),owner:i(""),tag:i(""),limitsCpu:i(""),limitsMemory:i("")},saving:!1,rules:{namespace:{required:!0,trigger:["input","blur"],validator(){if(t.model.namespace==="")return new Error(a("security.k8s_namespace.k8s_namespace_tips"))}},k8s:{required:!0,trigger:["input","blur"],validator(){if(t.model.k8s==="")return new Error(a("security.k8s_namespace.k8s_cluster_tips"))}}}}),d=async u=>{if(await t.k8sNamespaceFormRef.validate(),!t.saving){t.saving=!0;try{u===0?await r():await l(),t.saving=!1}catch{t.saving=!1}}},r=()=>{O(t.model).then(()=>{S(t.model).then(()=>{t.model.namespace="",t.model.k8s="",t.model.tag="",t.model.limitsCpu="",t.model.limitsMemory="",t.model.owner="",o.emit("confirmModal",e.showModalRef)})})},l=()=>{T(t.model,t.model.id).then(u=>{o.emit("confirmModal",e.showModalRef)})};return{variables:t,handleValidate:d}}const ke=k({name:"YarnQueueModal",props:{showModalRef:{type:Boolean,default:!1},statusRef:{type:Number,default:0},row:{type:Object,default:{}}},emits:["cancelModal","confirmModal"],setup(e,o){const{variables:a,handleValidate:t}=D(e,o),{t:d}=y(),r=()=>{e.statusRef===0&&(a.model.namespace="",a.model.k8s="",a.model.tag="",a.model.limitsCpu="",a.model.limitsMemory="",a.model.owner=""),o.emit("cancelModal",e.showModalRef)},l=()=>{t(e.statusRef)};return g(()=>e.statusRef,()=>{e.statusRef===0?(a.model.namespace="",a.model.k8s="",a.model.tag="",a.model.limitsCpu="",a.model.limitsMemory="",a.model.owner=""):(a.model.id=e.row.id,a.model.namespace=e.row.namespace,a.model.k8s=e.row.k8s,a.model.tag=e.row.tag,a.model.limitsCpu=e.row.limitsCpu+"",a.model.limitsMemory=e.row.limitsMemory+"",a.model.owner=e.row.owner)}),g(()=>e.row,()=>{a.model.id=e.row.id,a.model.namespace=e.row.namespace,a.model.k8s=e.row.k8s,a.model.tag=e.row.tag,a.model.limitsCpu=e.row.limitsCpu+"",a.model.limitsMemory=e.row.limitsMemory+"",a.model.owner=e.row.owner}),{t:d,...G(a),cancelModal:r,confirmModal:l}},render(){const{t:e}=this;return s("div",null,[s(I,{title:this.statusRef===0?e("security.k8s_namespace.create_namespace"):e("security.k8s_namespace.edit_namespace"),show:this.showModalRef,onCancel:this.cancelModal,onConfirm:this.confirmModal,confirmDisabled:!this.model.namespace||!this.model.k8s,confirmLoading:this.saving},{default:()=>s(j,{model:this.model,rules:this.rules,ref:"k8sNamespaceFormRef"},{default:()=>[s(n,{label:e("security.k8s_namespace.k8s_namespace"),path:"namespace"},{default:()=>[s(m,{placeholder:e("security.k8s_namespace.k8s_namespace_tips"),value:this.model.namespace,"onUpdate:value":o=>this.model.namespace=o},null)]}),s(n,{label:e("security.k8s_namespace.k8s_cluster"),path:"k8s"},{default:()=>[s(m,{placeholder:e("security.k8s_namespace.k8s_cluster_tips"),value:this.model.k8s,"onUpdate:value":o=>this.model.k8s=o},null)]}),s(n,{label:e("security.k8s_namespace.tag"),path:"tag"},{default:()=>[s(m,{placeholder:e("security.k8s_namespace.tag_tips"),value:this.model.tag,"onUpdate:value":o=>this.model.tag=o},null)]}),s(n,{label:e("security.k8s_namespace.limit_cpu"),path:"limitsCpu"},{default:()=>[s(v,null,{default:()=>[s(m,{placeholder:e("security.k8s_namespace.limit_cpu_tips"),value:this.model.limitsCpu,"onUpdate:value":o=>this.model.limitsCpu=o},null),s(w,null,{default:()=>[b("CORE")]})]})]}),s(n,{label:e("security.k8s_namespace.limit_memory"),path:"limitsMemory"},{default:()=>[s(v,null,{default:()=>[s(m,{placeholder:e("security.k8s_namespace.limit_memory_tips"),value:this.model.limitsMemory,"onUpdate:value":o=>this.model.limitsMemory=o},null),s(w,null,{default:()=>[b("GB")]})]})]}),s(n,{label:e("security.k8s_namespace.owner"),path:"owner"},{default:()=>[s(m,{placeholder:e("security.k8s_namespace.owner_tips"),value:this.model.owner,"onUpdate:value":o=>this.model.owner=o},null)]})]})})])}});export{ke as default};
