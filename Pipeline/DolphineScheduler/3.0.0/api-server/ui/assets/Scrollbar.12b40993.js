import{d as xe,w as Ie,j as p,ax as Ue,ab as _e,q as oe,p as _,v as ue,x as ie,A as Te,z as Ne,a as m,J as Fe,o as Ve,P as Ae,ay as qe,D as Ge,h as E,T as me,U as Je}from"./index.c5429249.js";import{f as Ke}from"./fade-in.cssr.9da325c6.js";import{V as Se}from"./VResizeObserver.14b04bb7.js";const Re=xe({render(){var r,l;return(l=(r=this.$slots).default)===null||l===void 0?void 0:l.call(r)}}),Qe={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function Ze(r,l,a){if(r==="mousemoveoutside"){const b=c=>{l.contains(c.target)||a(c)};return{mousemove:b,touchstart:b}}else if(r==="clickoutside"){let b=!1;const c=g=>{b=!l.contains(g.target)},f=g=>{!b||l.contains(g.target)||a(g)};return{mousedown:c,mouseup:f,touchstart:c,touchend:f}}return console.error(`[evtd/create-trap-handler]: name \`${r}\` is invalid. This could be a bug of evtd.`),{}}function Be(r,l,a){const b=Qe[r];let c=b.get(l);c===void 0&&b.set(l,c=new WeakMap);let f=c.get(a);return f===void 0&&c.set(a,f=Ze(r,l,a)),f}function en(r,l,a,b){if(r==="mousemoveoutside"||r==="clickoutside"){const c=Be(r,l,a);return Object.keys(c).forEach(f=>{re(f,document,c[f],b)}),!0}return!1}function nn(r,l,a,b){if(r==="mousemoveoutside"||r==="clickoutside"){const c=Be(r,l,a);return Object.keys(c).forEach(f=>{V(f,document,c[f],b)}),!0}return!1}function tn(){if(typeof window=="undefined")return{on:()=>{},off:()=>{}};const r=new WeakMap,l=new WeakMap;function a(){r.set(this,!0)}function b(){r.set(this,!0),l.set(this,!0)}function c(o,n,s){const d=o[n];return o[n]=function(){return s.apply(o,arguments),d.apply(o,arguments)},o}function f(o,n){o[n]=Event.prototype[n]}const g=new WeakMap,H=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function Y(){var o;return(o=g.get(this))!==null&&o!==void 0?o:null}function L(o,n){H!==void 0&&Object.defineProperty(o,"currentTarget",{configurable:!0,enumerable:!0,get:n!=null?n:H.get})}const M={bubble:{},capture:{}},S={};function A(){const o=function(n){const{type:s,eventPhase:d,target:h,bubbles:P}=n;if(d===2)return;const z=d===1?"capture":"bubble";let R=h;const x=[];for(;R===null&&(R=window),x.push(R),R!==window;)R=R.parentNode||null;const W=M.capture[s],D=M.bubble[s];if(c(n,"stopPropagation",a),c(n,"stopImmediatePropagation",b),L(n,Y),z==="capture"){if(W===void 0)return;for(let C=x.length-1;C>=0&&!r.has(n);--C){const X=x[C],I=W.get(X);if(I!==void 0){g.set(n,X);for(const U of I){if(l.has(n))break;U(n)}}if(C===0&&!P&&D!==void 0){const U=D.get(X);if(U!==void 0)for(const le of U){if(l.has(n))break;le(n)}}}}else if(z==="bubble"){if(D===void 0)return;for(let C=0;C<x.length&&!r.has(n);++C){const X=x[C],I=D.get(X);if(I!==void 0){g.set(n,X);for(const U of I){if(l.has(n))break;U(n)}}}}f(n,"stopPropagation"),f(n,"stopImmediatePropagation"),L(n)};return o.displayName="evtdUnifiedHandler",o}function q(){const o=function(n){const{type:s,eventPhase:d}=n;if(d!==2)return;const h=S[s];h!==void 0&&h.forEach(P=>P(n))};return o.displayName="evtdUnifiedWindowEventHandler",o}const k=A(),j=q();function G(o,n){const s=M[o];return s[n]===void 0&&(s[n]=new Map,window.addEventListener(n,k,o==="capture")),s[n]}function Z(o){return S[o]===void 0&&(S[o]=new Set,window.addEventListener(o,j)),S[o]}function J(o,n){let s=o.get(n);return s===void 0&&o.set(n,s=new Set),s}function ee(o,n,s,d){const h=M[n][s];if(h!==void 0){const P=h.get(o);if(P!==void 0&&P.has(d))return!0}return!1}function B(o,n){const s=S[o];return!!(s!==void 0&&s.has(n))}function y(o,n,s,d){let h;if(typeof d=="object"&&d.once===!0?h=W=>{ne(o,n,h,d),s(W)}:h=s,en(o,n,h,d))return;const z=d===!0||typeof d=="object"&&d.capture===!0?"capture":"bubble",R=G(z,o),x=J(R,n);if(x.has(h)||x.add(h),n===window){const W=Z(o);W.has(h)||W.add(h)}}function ne(o,n,s,d){if(nn(o,n,s,d))return;const P=d===!0||typeof d=="object"&&d.capture===!0,z=P?"capture":"bubble",R=G(z,o),x=J(R,n);if(n===window&&!ee(n,P?"bubble":"capture",o,s)&&B(o,s)){const D=S[o];D.delete(s),D.size===0&&(window.removeEventListener(o,j),S[o]=void 0)}x.has(s)&&x.delete(s),x.size===0&&R.delete(n),R.size===0&&(window.removeEventListener(o,k,z==="capture"),M[z][o]=void 0)}return{on:y,off:ne}}const{on:re,off:V}=tn();function hn(r,l){return Ie(r,a=>{a!==void 0&&(l.value=a)}),p(()=>r.value===void 0?l.value:r.value)}const rn=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function on(){return rn}function ln(r){const l={isDeactivated:!1};let a=!1;return Ue(()=>{if(l.isDeactivated=!1,!a){a=!0;return}r()}),_e(()=>{l.isDeactivated=!0,a||(a=!0)}),l}var an=oe("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[_(">",[oe("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[_("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),_(">",[oe("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),oe("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[ue("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[_(">",[ie("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),ue("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[_(">",[ie("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),ue("disabled",[_(">",[ie("scrollbar",{pointerEvents:"none"})])]),_(">",[ie("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[Ke(),_("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]);const sn=Object.assign(Object.assign({},Te.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),ye=xe({name:"Scrollbar",props:sn,inheritAttrs:!1,setup(r){const{mergedClsPrefixRef:l,inlineThemeDisabled:a}=Ne(r),b=m(null),c=m(null),f=m(null),g=m(null),H=m(null),Y=m(null),L=m(null),M=m(null),S=m(null),A=m(null),q=m(null),k=m(0),j=m(0),G=m(!1),Z=m(!1);let J=!1,ee=!1,B,y,ne=0,o=0,n=0,s=0;const d=on(),h=p(()=>{const{value:e}=M,{value:t}=Y,{value:i}=A;return e===null||t===null||i===null?0:Math.min(e,i*e/t+r.size*1.5)}),P=p(()=>`${h.value}px`),z=p(()=>{const{value:e}=S,{value:t}=L,{value:i}=q;return e===null||t===null||i===null?0:i*e/t+r.size*1.5}),R=p(()=>`${z.value}px`),x=p(()=>{const{value:e}=M,{value:t}=k,{value:i}=Y,{value:u}=A;if(e===null||i===null||u===null)return 0;{const w=i-e;return w?t/w*(u-h.value):0}}),W=p(()=>`${x.value}px`),D=p(()=>{const{value:e}=S,{value:t}=j,{value:i}=L,{value:u}=q;if(e===null||i===null||u===null)return 0;{const w=i-e;return w?t/w*(u-z.value):0}}),C=p(()=>`${D.value}px`),X=p(()=>{const{value:e}=M,{value:t}=Y;return e!==null&&t!==null&&t>e}),I=p(()=>{const{value:e}=S,{value:t}=L;return e!==null&&t!==null&&t>e}),U=p(()=>{const{trigger:e}=r;return e==="none"||G.value}),le=p(()=>{const{trigger:e}=r;return e==="none"||Z.value}),N=p(()=>{const{container:e}=r;return e?e():c.value}),He=p(()=>{const{content:e}=r;return e?e():f.value}),de=ln(()=>{r.container||fe({top:k.value,left:j.value})}),Me=()=>{de.isDeactivated||F()},Pe=e=>{if(de.isDeactivated)return;const{onResize:t}=r;t&&t(e),F()},fe=(e,t)=>{if(!r.scrollable)return;if(typeof e=="number"){K(t!=null?t:0,e,0,!1,"auto");return}const{left:i,top:u,index:w,elSize:T,position:$,behavior:v,el:O,debounce:te=!0}=e;(i!==void 0||u!==void 0)&&K(i!=null?i:0,u!=null?u:0,0,!1,v),O!==void 0?K(0,O.offsetTop,O.offsetHeight,te,v):w!==void 0&&T!==void 0?K(0,w*T,T,te,v):$==="bottom"?K(0,Number.MAX_SAFE_INTEGER,0,!1,v):$==="top"&&K(0,0,0,!1,v)},ze=(e,t)=>{if(!r.scrollable)return;const{value:i}=N;!i||(typeof e=="object"?i.scrollBy(e):i.scrollBy(e,t||0))};function K(e,t,i,u,w){const{value:T}=N;if(!!T){if(u){const{scrollTop:$,offsetHeight:v}=T;if(t>$){t+i<=$+v||T.scrollTo({left:e,top:t+i-v,behavior:w});return}}T.scrollTo({left:e,top:t,behavior:w})}}function Ee(){ke(),De(),F()}function We(){ae()}function ae(){Ce(),Le()}function Ce(){y!==void 0&&window.clearTimeout(y),y=window.setTimeout(()=>{Z.value=!1},r.duration)}function Le(){B!==void 0&&window.clearTimeout(B),B=window.setTimeout(()=>{G.value=!1},r.duration)}function ke(){B!==void 0&&window.clearTimeout(B),G.value=!0}function De(){y!==void 0&&window.clearTimeout(y),Z.value=!0}function Xe(e){const{onScroll:t}=r;t&&t(e),he()}function he(){const{value:e}=N;e&&(k.value=e.scrollTop,j.value=e.scrollLeft)}function $e(){const{value:e}=He;e&&(Y.value=e.offsetHeight,L.value=e.offsetWidth);const{value:t}=N;t&&(M.value=t.offsetHeight,S.value=t.offsetWidth);const{value:i}=H,{value:u}=g;i&&(q.value=i.offsetWidth),u&&(A.value=u.offsetHeight)}function ve(){const{value:e}=N;e&&(k.value=e.scrollTop,j.value=e.scrollLeft,M.value=e.offsetHeight,S.value=e.offsetWidth,Y.value=e.scrollHeight,L.value=e.scrollWidth);const{value:t}=H,{value:i}=g;t&&(q.value=t.offsetWidth),i&&(A.value=i.offsetHeight)}function F(){!r.scrollable||(r.useUnifiedContainer?ve():($e(),he()))}function be(e){var t;return!(!((t=b.value)===null||t===void 0)&&t.contains(e.target))}function Oe(e){e.preventDefault(),e.stopPropagation(),ee=!0,re("mousemove",window,we,!0),re("mouseup",window,ge,!0),o=j.value,n=e.clientX}function we(e){if(!ee)return;B!==void 0&&window.clearTimeout(B),y!==void 0&&window.clearTimeout(y);const{value:t}=S,{value:i}=L,{value:u}=z;if(t===null||i===null)return;const T=(e.clientX-n)*(i-t)/(t-u),$=i-t;let v=o+T;v=Math.min($,v),v=Math.max(v,0);const{value:O}=N;if(O){O.scrollLeft=v;const{internalOnUpdateScrollLeft:te}=r;te&&te(v)}}function ge(e){e.preventDefault(),e.stopPropagation(),V("mousemove",window,we,!0),V("mouseup",window,ge,!0),ee=!1,F(),be(e)&&ae()}function Ye(e){e.preventDefault(),e.stopPropagation(),J=!0,re("mousemove",window,se,!0),re("mouseup",window,ce,!0),ne=k.value,s=e.clientY}function se(e){if(!J)return;B!==void 0&&window.clearTimeout(B),y!==void 0&&window.clearTimeout(y);const{value:t}=M,{value:i}=Y,{value:u}=h;if(t===null||i===null)return;const T=(e.clientY-s)*(i-t)/(t-u),$=i-t;let v=ne+T;v=Math.min($,v),v=Math.max(v,0);const{value:O}=N;O&&(O.scrollTop=v)}function ce(e){e.preventDefault(),e.stopPropagation(),V("mousemove",window,se,!0),V("mouseup",window,ce,!0),J=!1,F(),be(e)&&ae()}Fe(()=>{const{value:e}=I,{value:t}=X,{value:i}=l,{value:u}=H,{value:w}=g;u&&(e?u.classList.remove(`${i}-scrollbar-rail--disabled`):u.classList.add(`${i}-scrollbar-rail--disabled`)),w&&(t?w.classList.remove(`${i}-scrollbar-rail--disabled`):w.classList.add(`${i}-scrollbar-rail--disabled`))}),Ve(()=>{r.container||F()}),Ae(()=>{B!==void 0&&window.clearTimeout(B),y!==void 0&&window.clearTimeout(y),V("mousemove",window,se,!0),V("mouseup",window,ce,!0)});const je=Te("Scrollbar","-scrollbar",an,qe,r,l),pe=p(()=>{const{common:{cubicBezierEaseInOut:e,scrollbarBorderRadius:t,scrollbarHeight:i,scrollbarWidth:u},self:{color:w,colorHover:T}}=je.value;return{"--n-scrollbar-bezier":e,"--n-scrollbar-color":w,"--n-scrollbar-color-hover":T,"--n-scrollbar-border-radius":t,"--n-scrollbar-width":u,"--n-scrollbar-height":i}}),Q=a?Ge("scrollbar",void 0,pe,r):void 0;return Object.assign(Object.assign({},{scrollTo:fe,scrollBy:ze,sync:F,syncUnifiedContainer:ve,handleMouseEnterWrapper:Ee,handleMouseLeaveWrapper:We}),{mergedClsPrefix:l,containerScrollTop:k,wrapperRef:b,containerRef:c,contentRef:f,yRailRef:g,xRailRef:H,needYBar:X,needXBar:I,yBarSizePx:P,xBarSizePx:R,yBarTopPx:W,xBarLeftPx:C,isShowXBar:U,isShowYBar:le,isIos:d,handleScroll:Xe,handleContentResize:Me,handleContainerResize:Pe,handleYScrollMouseDown:Ye,handleXScrollMouseDown:Oe,cssVars:a?void 0:pe,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender})},render(){var r;const{$slots:l,mergedClsPrefix:a,triggerDisplayManually:b}=this;if(!this.scrollable)return(r=l.default)===null||r===void 0?void 0:r.call(l);const c=()=>{var f,g;(f=this.onRender)===null||f===void 0||f.call(this);const H=this.trigger==="none";return E("div",Je(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${a}-scrollbar`,this.themeClass],style:this.cssVars,onMouseenter:b?void 0:this.handleMouseEnterWrapper,onMouseleave:b?void 0:this.handleMouseLeaveWrapper}),[this.container?(g=l.default)===null||g===void 0?void 0:g.call(l):E("div",{role:"none",ref:"containerRef",class:[`${a}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},E(Se,{onResize:this.handleContentResize},{default:()=>E("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${a}-scrollbar-content`,this.contentClass]},l)})),E("div",{ref:"yRailRef",class:`${a}-scrollbar-rail ${a}-scrollbar-rail--vertical`,style:this.verticalRailStyle,"aria-hidden":!0},E(H?Re:me,H?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?E("div",{class:`${a}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),E("div",{ref:"xRailRef",class:`${a}-scrollbar-rail ${a}-scrollbar-rail--horizontal`,style:this.horizontalRailStyle,"aria-hidden":!0},E(H?Re:me,H?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?E("div",{class:`${a}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])};return this.container?c():E(Se,{onResize:this.handleContainerResize},{default:c})}});var vn=ye;const bn=ye;export{vn as N,Re as W,bn as X,V as a,ln as b,re as o,hn as u};
