import{C as R}from"./index.97f03277.js";import{u as S,h as I,r as C,a as u,d as w,o as M,t as U,c as o,_ as O}from"./index.c5429249.js";import{a as G}from"./index.bbd47aff.js";import{e as H}from"./index.bbb6cfa3.js";import W from"./table-action.6a2194d2.js";import{_ as q}from"./lodash.084a01e7.js";import{p as b}from"./common.145f2eef.js";import{C as d,c as L,D as x}from"./column-width-config.63466f21.js";import{f as k}from"./index.a2051d72.js";import A from"./form-modal.9793a560.js";import{S as F}from"./SearchOutlined.5b629110.js";import{N as V}from"./Card.c707a1eb.js";import{N as y}from"./Button.c43a24dc.js";import{N as B}from"./Input.97d5419b.js";import{N as X}from"./Icon.8e3bf5ec.js";import{N as E,a as J}from"./DataTable.d85b2298.js";import"./service.0215c8a4.js";import"./EditOutlined.af3970b8.js";import"./Tooltip.d759bd4b.js";import"./Popover.df2981b4.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./format-length.e7c2072e.js";import"./utils.3eee947a.js";import"./resolve-slot.7c241306.js";import"./use-compitable.b0459e69.js";import"./next-frame-once.da993024.js";import"./Switch.9ad161ba.js";import"./index.16077d24.js";import"./Space.e50db48f.js";import"./use-rtl.c78ffbd8.js";import"./is-browser.d3e5def6.js";import"./get-slot.c85d6606.js";import"./SettingOutlined.716a0298.js";import"./PauseCircleOutlined.813adbbb.js";import"./CloseCircleOutlined.46c86330.js";import"./CheckCircleOutlined.6daee0ce.js";import"./ClockCircleOutlined.6c97131a.js";import"./index.20e11ec3.js";import"./index.3b9f9e63.js";import"./keysOf.963e6f6c.js";import"./fade-in-scale-up.cssr.05526022.js";import"./Form.13999875.js";import"./FormItem.51e71cc3.js";import"./Select.e833ee40.js";import"./use-locale.be539345.js";import"./Selection.a106a9c5.js";import"./Suffix.9ee1fead.js";import"./InputNumber.d8a1dfa4.js";import"./Add.e846b00c.js";import"./ArrowDown.db19052e.js";import"./Checkbox.7506e5f5.js";import"./RadioGroup.47f9a37a.js";import"./Radio.5a2a0c2a.js";import"./Dropdown.749e9383.js";import"./ChevronRight.f70a9c2d.js";import"./use-keyboard.22724d1e.js";import"./Forward.23552619.js";const K="_toolbar_tmg7c_17",Q="_left_tmg7c_23",Y="_right_tmg7c_26",Z="_pagination_tmg7c_49";var h={toolbar:K,left:Q,right:Y,"table-card":"_table-card_tmg7c_35","table-action":"_table-action_tmg7c_38",pagination:Z};function z(p=(a,n,t,f,i,s)=>{},r=()=>{}){const{t:a}=S(),n=[{title:"#",key:"index",render:(i,s)=>s+1,...d.index},{title:a("resource.task_group_option.name"),key:"name",...d.name},{title:a("resource.task_group_option.project_name"),key:"projectName",...d.name},{title:a("resource.task_group_option.resource_pool_size"),key:"groupSize",width:160},{title:a("resource.task_group_option.resource_used_pool_size"),key:"useSize",width:140},{title:a("resource.task_group_option.desc"),key:"description",...d.note},{title:a("resource.task_group_option.create_time"),key:"createTime",...d.time},{title:a("resource.task_group_option.update_time"),key:"updateTime",...d.time},{title:a("resource.task_group_option.actions"),key:"actions",...d.operation(3),render:i=>I(W,{row:i,onResetTableData:()=>{t.page>1&&t.tableData.length===1&&(t.page-=1),r()},onUpdateItem:(s,e,g,l,m,_)=>{p(s,e,g,l,m,_)}})}],t=C({tableData:[],tableWidth:L(n)||x,page:u(1),pageSize:u(10),name:u(null),totalPage:u(1),loadingRef:u(!1)});return{getTableData:i=>{t.loadingRef||(t.loadingRef=!0,Promise.all([G(i),H()]).then(s=>{t.totalPage=s[0].totalPage,t.tableData=s[0].totalList.map((e,g)=>{let l="";if(s[1]){const m=q.find(s[1],{code:e.projectCode});m&&(l=m.name)}return e.projectName=l,e.createTime=k(b(e.createTime),"yyyy-MM-dd HH:mm:ss"),e.updateTime=k(b(e.updateTime),"yyyy-MM-dd HH:mm:ss"),{...e}}),t.loadingRef=!1}))},variables:t,columns:n}}function $(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!O(p)}const pe=w({name:"taskGroupOption",setup(){const{t:p}=S(),{variables:r,getTableData:a}=z(),n=u(!1),t=u(0),f=u(),i=C({id:0,name:"",projectCode:0,groupSize:0,status:1,description:""}),s=()=>{a({pageSize:r.pageSize,pageNo:r.page,name:r.name})},e=()=>{a({pageSize:r.pageSize,pageNo:r.page,name:r.name})},g=()=>{n.value=!1},l=()=>{n.value=!1,e()},m=()=>{r.page=1,e()},_=(T,D,v,j,P)=>{t.value=1,n.value=!0,i.id=T,i.name=D,i.projectCode=v,i.groupSize=j,i.description=P},c=()=>{e()},N=()=>{t.value=0,n.value=!0};return M(()=>{s()}),{...U(r),t:p,onCreate:N,onSearch:c,searchParamRef:f,resetTableData:e,onUpdatePageSize:m,updateItem:_,showModalRef:n,modelStatusRef:t,onCancel:g,onConfirm:l,updateItemData:i}},render(){let p;const{t:r,showModalRef:a,modelStatusRef:n,onCancel:t,onConfirm:f,updateItemData:i,resetTableData:s,onUpdatePageSize:e,updateItem:g,onSearch:l,loadingRef:m}=this,{columns:_}=z(g,s);return o("div",null,[o(V,null,{default:()=>[o("div",{class:h.toolbar},[o("div",{class:h.left},[o(y,{size:"small",type:"primary",onClick:()=>this.onCreate()},$(p=r("resource.task_group_option.create"))?p:{default:()=>[p]})]),o("div",{class:h.right},[o(B,{size:"small",value:this.name,"onUpdate:value":c=>this.name=c,placeholder:r("resource.task_group_option.please_enter_keywords")},null),o(y,{size:"small",type:"primary",onClick:l},{default:()=>[o(X,null,{default:()=>[o(F,null,null)]})]})])])]}),o(R,{class:h["table-card"],title:r("resource.task_group_option.option")},{default:()=>[o("div",null,[o(E,{loading:m,columns:_,size:"small",data:this.tableData,striped:!0,scrollX:this.tableWidth},null),o("div",{class:h.pagination},[o(J,{page:this.page,"onUpdate:page":c=>this.page=c,"page-size":this.pageSize,"onUpdate:page-size":c=>this.pageSize=c,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:s,onUpdatePageSize:e},null)])])]}),a&&o(A,{show:a,onCancel:t,onConfirm:f,data:i,status:n},null)])}});export{pe as default};
