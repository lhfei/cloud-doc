import{d as v,a as G,h as n,bB as D,bz as E,bA as V,r as q,t as B,c as C,U as P,X as f,_ as T,I as w,B as L}from"./index.c5429249.js";import{N as K}from"./Form.13999875.js";import{g as H,a as x,b as J,N}from"./Grid.b73d23e7.js";import{N as X}from"./Spin.1e9405a1.js";import{l as p}from"./lodash.084a01e7.js";import{N as z}from"./Input.97d5419b.js";import{N as M}from"./Radio.5a2a0c2a.js";import{N as I}from"./Space.e50db48f.js";import{N as Y}from"./RadioGroup.47f9a37a.js";import{M as Q}from"./index.31fbc8bd.js";import{u as _,N as b}from"./Button.c43a24dc.js";import{D as k}from"./DeleteOutlined.e68b06d7.js";import{b as W,N as Z,c as ee}from"./FormItem.51e71cc3.js";import{k as O}from"./index.3e01cddc.js";import{N as te}from"./Switch.9ad161ba.js";import{N as oe}from"./InputNumber.d8a1dfa4.js";import{a as re}from"./Select.e833ee40.js";import{a as $,N as ne}from"./Checkbox.7506e5f5.js";import{N as se}from"./TreeSelect.b9641da1.js";const ae=Object.assign(Object.assign({},J),ee);var F=v({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:ae,setup(){const e=G(null);return{formItemInstRef:e,validate:(...o)=>{const{value:s}=e;if(s)return s.validate(...o)},restoreValidation:()=>{const{value:o}=e;if(o)return o.restoreValidation()}}},render(){return n(x,O(this.$.vnode.props||{},H),{default:()=>{const e=O(this.$props,W);return n(Z,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}});const ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},le=V("defs",null,null,-1),ue=V("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),de=V("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),ce=[le,ue,de];var R=v({name:"PlusOutlined",render:function(t,r){return D(),E("svg",ie,ce)}});function pe(){const e=q({formRef:G()}),t=async(...u)=>{await e.formRef.validate(...u)},r=u=>{const c=Object.keys(e.formRef.model);for(const i of c)Object.keys(u).includes(i)||delete e.formRef.model[i];o(u)},o=u=>{for(const[c,i]of Object.entries(u))e.formRef.model[c]=i};return{state:e,validate:t,setValues:o,getValues:()=>e.formRef.model,resetValues:r,restoreValidation:()=>{e.formRef.restoreValidation()}}}function U(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!T(e)}const me={meta:{type:Object,default:{},required:!0},layout:{type:Object},loading:{type:Boolean,default:!1}},Xe=v({name:"DSForm",props:me,setup(e,{expose:t}){const{state:r,...o}=pe();return t({...o}),{...B(r)}},render(e){let t;const{loading:r,layout:o,meta:s}=e,{elements:a=[],...u}=s;return C(X,{show:r},{default:()=>[C(K,P(u,{ref:"formRef"}),{default:()=>[C(N,o,U(t=a.map(c=>{let i;const{span:l=24,path:d,widget:m,...h}=c;return C(F,P(h,{span:f(l)===void 0?24:f(l),path:d,key:d||String(Date.now()+Math.random())}),U(i=n(m))?i:{default:()=>[i]})}))?t:{default:()=>[t]})]})]})}});function S(e){return e?(Array.isArray(e)&&e.forEach(t=>(t!=null&&t.message||delete t.message,t)),e.message||delete e.message,e):{}}function fe(e,t){const{props:r,field:o}=p.exports.isFunction(e)?e():e;return n(z,{...r,value:t[o],onUpdateValue:s=>void(t[o]=s)})}function he(e,t){const{props:r,field:o,options:s}=p.exports.isFunction(e)?e():e;return s?n(Y,{...r,value:t[o],onUpdateValue:a=>void(t[o]=a)},()=>n(I,null,()=>f(s).map(a=>n(M,a,()=>a.label)))):n(M,{...r,value:t[o],onUpdateChecked:a=>void(t[o]=a)})}function ge(e,t){const{props:r,field:o}=p.exports.isFunction(e)?e():e;return n(Q,{options:r,value:t[o],onUpdateValue:s=>void(t[o]=s)})}const ve=v({name:"CustomParameters",emits:["add"],setup(e,t){const r=_({});return{onAdd:()=>void t.emit("add"),disabled:r.mergedDisabledRef}},render(){const{disabled:e,$slots:t,onAdd:r}=this;return n(I,{vertical:!0,style:{width:"100%"}},{default:()=>[w(t,"default",{disabled:e}),n(b,{circle:!0,size:"small",type:"info",class:"btn-create-custom-parameter",disabled:e,onClick:r},{icon:()=>n(R)})]})}}),be=e=>{const t={},r={},o=(s,a,u)=>{s.forEach(c=>{const i=p.exports.isFunction(c)?c():c;if(Array.isArray(i.children)){const l={},d={};o(i.children,l,d),a[i.field]=[l],u[i.field]={type:"array",fields:d};return}else a[i.field]=i.value||null,i.validate&&(u[i.field]=S(i.validate))})};return o(e,t,r),{defaultValue:t,ruleItem:r}};function ye(e,t,r){const o=p.exports.isFunction(e)?e():e,{field:s,children:a=[]}=o,{defaultValue:u,ruleItem:c}=be(a);r.push(c);const i=(d,m,h)=>a.map(y=>{const g=p.exports.isFunction(y)?y(m):y;return n(F,{showLabel:!!g.name,path:g.path||`${s}[${m}].${g.field}`,label:g.name,span:f(g.span),class:g.class,rule:g.rule},()=>A(g,d))});return n(ve,{onAdd:()=>{r.push(c),t[s].push({...u})}},{default:({disabled:d})=>t[s].map((m,h)=>n(N,{xGap:10},()=>[...i(m,h),n(x,{span:2},()=>n(b,{circle:!0,type:"error",size:"small",disabled:d,class:"btn-delete-custom-parameter",onClick:()=>{t[s].splice(h,1),r.splice(h,1)}},{icon:()=>n(k)}))]))})}function Ie(e,t){const{props:r,field:o,slots:s={}}=p.exports.isFunction(e)?e():e;return n(te,{...r,value:t[o],onUpdateValue:a=>void(t[o]=a)},{...s})}function Ce(e,t){const{props:r,field:o,slots:s={}}=p.exports.isFunction(e)?e():e;return n(oe,{...r,value:t[o],onUpdateValue:a=>void(t[o]=a)},{...s})}function xe(e,t){const{props:r,field:o,options:s=[]}=p.exports.isFunction(e)?e():e;return n(re,{...r,value:t[o],onUpdateValue:a=>{t[o]=a,r!=null&&r.onUpdateValue&&r.onUpdateValue(a)},options:f(s)})}function Ne(e,t){const{props:r,field:o,options:s}=p.exports.isFunction(e)?e():e;return s?n(ne,{value:t[o],onUpdateValue:a=>void(t[o]=a)},()=>n(I,null,()=>f(s).map(a=>n($,{...a})))):n($,{...r,value:t[o],onUpdateChecked:a=>void(t[o]=a)})}function Fe(e,t){const{props:r={},field:o,options:s=[]}=p.exports.isFunction(e)?e():e;return n(se,{...r,value:t[o],onUpdateValue:a=>void(t[o]=a),options:f(s)})}const Ve=v({name:"MultiInput",emits:["add"],setup(e,t){const r=_({});return{onAdd:()=>void t.emit("add"),disabled:r.mergedDisabledRef}},render(){const{disabled:e,$slots:t,onAdd:r}=this;return n(I,{vertical:!0,style:{width:"100%"}},{default:()=>[w(t,"default",{disabled:e}),n(b,{circle:!0,size:"small",type:"info",disabled:e,onClick:r},{icon:()=>n(R)})]})}});function we(e,t,r){const{field:o}=p.exports.isFunction(e)?e():e,s=(u,c)=>{const i=p.exports.isFunction(e)?e():e;return n(F,{showLabel:!1,path:`${i.field}[${c}]`,span:f(i.span)},()=>n(z,{...i.props,value:u,onUpdateValue:l=>void(t[i.field][c]=l)}))};return n(Ve,{name:o,onAdd:()=>{t[o].push("")}},{default:({disabled:u})=>t[o].map((c,i)=>n(N,{xGap:10},()=>[s(c,i),n(x,{span:2},()=>n(b,{circle:!0,type:"error",size:"small",disabled:u,onClick:()=>{t[o].splice(i,1)}},{icon:()=>n(k)}))]))})}const _e=v({name:"MultiCondition",emits:["add"],setup(e,t){const r=_({});return{onAdd:()=>void t.emit("add"),disabled:r.mergedDisabledRef}},render(){const{disabled:e,$slots:t,onAdd:r}=this;return n(I,{vertical:!0,style:{width:"100%"}},{default:()=>[w(t,"default",{disabled:e}),n(b,{circle:!0,size:"tiny",type:"info",disabled:e,onClick:r},{icon:()=>n(R)})]})}});function ke(e,t,r){const o={},{field:s,children:a=[]}=p.exports.isFunction(e)?e():e;a.forEach(i=>{const l=p.exports.isFunction(i)?i():i;l.validate&&(o[l.field]=S(l.validate))});const u=(i,l)=>a.map(d=>{const m=p.exports.isFunction(d)?d():d;return n(F,{showLabel:!!d.name,label:d.name?d.name:"",path:`${t[s]}[${l}].${m.field}`,span:f(m.span)},()=>A(d,t[s][l]))});return n(_e,{name:s,onAdd:()=>{const i={};a.map(l=>{const{field:d}=p.exports.isFunction(l)?l():l;d&&(i[d]=null)}),t[s].push(i)}},{default:({disabled:i})=>t[s].map((l,d)=>n(N,{xGap:10},()=>[...u(l,d),n(x,{span:2,style:{alignSelf:"center"}},()=>n(b,{circle:!0,type:"error",size:"tiny",disabled:i,onClick:()=>{t[s].splice(d,1)}},{icon:()=>n(k)}))]))})}var j=Object.freeze(Object.defineProperty({__proto__:null,renderInput:fe,renderRadio:he,renderEditor:ge,renderCustomParameters:ye,renderSwitch:Ie,renderInputNumber:Ce,renderSelect:xe,renderCheckbox:Ne,renderTreeSelect:Fe,renderMultiInput:we,renderMultiCondition:ke},Symbol.toStringTag,{value:"Module"}));const Re=["input","radio","editor","custom-parameters","switch","input-number","select","checkbox","tree-select","multi-input","custom","multi-condition"],A=(e,t,r)=>{const{type:o="input",widget:s,field:a}=p.exports.isFunction(e)?e():e;if(!Re.includes(o))return null;const u=`render${p.exports.upperFirst(p.exports.camelCase(o))}`;if(o==="custom")return s||null;if(o==="custom-parameters"){let c=[];return r&&!r[a]&&(c=r[a]=[]),j[u](e,t,c)}return j[u](e,t)};function Ye(e,t){const r={},o={},s=[];for(const a of e){const u=p.exports.isFunction(a)?a():a,{name:c,value:i,field:l,children:d,validate:m,...h}=u;(i||i===0)&&(t[l]=i,o[l]=i),m&&(r[l]=S(m));const y={showLabel:!!c,...p.exports.omit(h,["type","props","options"]),label:c,path:d?"":l,widget:()=>A(a,t,r),span:L(u,"span")};s.push(y)}return{rules:r,elements:s,initialValues:o}}export{Xe as F,Ye as g};
