import{C as k}from"./index.97f03277.js";import b from"./detail.88a8736b.js";import{u as v,h as o,r as D,d as T,a as N,o as L,w as O,t as V,c as a,_ as I,a2 as M}from"./index.c5429249.js";import W from"./json-highlight.ab4e98d4.js";import{B as j}from"./index.3b9f9e63.js";import{C as c,c as x,D as z}from"./column-width-config.63466f21.js";import{N as R}from"./Popover.df2981b4.js";import{E as U}from"./EditOutlined.af3970b8.js";import{N as B}from"./Popconfirm.83d41c5f.js";import{D as q}from"./DeleteOutlined.e68b06d7.js";import{N as S}from"./Tooltip.d759bd4b.js";import{N as g}from"./Button.c43a24dc.js";import{N as C}from"./Icon.8e3bf5ec.js";import{N as w}from"./Space.e50db48f.js";import{d as E,b as F}from"./index.3b5bce66.js";import{S as H}from"./SearchOutlined.5b629110.js";import{N as G}from"./Input.97d5419b.js";import{N as J,a as X}from"./DataTable.d85b2298.js";import"./Card.c707a1eb.js";import"./use-rtl.c78ffbd8.js";import"./resolve-slot.7c241306.js";import"./index.16077d24.js";import"./keysOf.963e6f6c.js";import"./index.20e11ec3.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./fade-in-scale-up.cssr.05526022.js";import"./utils.3eee947a.js";import"./is-browser.d3e5def6.js";import"./Spin.1e9405a1.js";import"./use-compitable.b0459e69.js";import"./InputNumber.d8a1dfa4.js";import"./use-locale.be539345.js";import"./Add.e846b00c.js";import"./RadioGroup.47f9a37a.js";import"./get-slot.c85d6606.js";import"./Radio.5a2a0c2a.js";import"./Form.13999875.js";import"./FormItem.51e71cc3.js";import"./format-length.e7c2072e.js";import"./Select.e833ee40.js";import"./Selection.a106a9c5.js";import"./next-frame-once.da993024.js";import"./Suffix.9ee1fead.js";import"./service.0215c8a4.js";import"./lodash.084a01e7.js";import"./text.6383fc2d.js";import"./ArrowDown.db19052e.js";import"./Checkbox.7506e5f5.js";import"./Dropdown.749e9383.js";import"./ChevronRight.f70a9c2d.js";import"./use-keyboard.22724d1e.js";import"./Forward.23552619.js";function $(e){const{t}=v();return{getColumns:()=>{const s=[{title:"#",key:"index",render:(i,l)=>l+1,...c.index},{title:t("datasource.datasource_name"),key:"name",...c.name},{title:t("datasource.datasource_user_name"),key:"userName",...c.userName},{title:t("datasource.datasource_type"),key:"type",width:180},{title:t("datasource.datasource_parameter"),key:"parameter",width:180,render:i=>o(R,{trigger:"click"},{trigger:()=>o(j,null,{default:()=>t("datasource.click_to_view")}),default:()=>o(W,{rowData:i})})},{title:t("datasource.description"),key:"note",...c.note,render:i=>i.note||"-"},{title:t("datasource.create_time"),key:"createTime",...c.time},{title:t("datasource.update_time"),key:"updateTime",...c.time},{title:t("datasource.operation"),key:"operation",...c.operation(2),render:i=>o(w,null,{default:()=>[o(S,null,{trigger:()=>o(g,{circle:!0,type:"info",size:"small",onClick:()=>void e(i.id,"edit")},{default:()=>o(C,null,{default:()=>o(U)})}),default:()=>t("datasource.edit")}),o(S,null,{trigger:()=>o(B,{onPositiveClick:()=>void e(i.id,"delete"),negativeText:t("datasource.cancel"),positiveText:t("datasource.confirm")},{trigger:()=>o(g,{circle:!0,type:"error",size:"small",class:"btn-delete"},{default:()=>o(C,null,{default:()=>o(q)})}),default:()=>t("datasource.delete_confirm")}),default:()=>t("datasource.delete")})]})}];return{columns:s,tableWidth:x(s)||z}}}}function A(){const e=D({page:1,pageSize:10,itemCount:0,searchVal:"",list:[],loading:!1}),t=async()=>{if(e.loading)return;e.loading=!0;const r=await F({pageNo:e.page,pageSize:e.pageSize,searchVal:e.searchVal});e.loading=!1,e.list=r.totalList,e.itemCount=r.total},n=()=>{e.list.length===1&&e.page>1&&--e.page,t()};return{data:e,changePage:r=>{e.page=r,t()},changePageSize:r=>{e.page=1,e.pageSize=r,t()},deleteRecord:async r=>{await E(r),n()},updateList:n}}const K="_conditions_dre2i_17",Q="_pagination_dre2i_27";var u={conditions:K,"conditions-search-input":"_conditions-search-input_dre2i_23",pagination:Q,"mt-8":"_mt-8_dre2i_32"};function Y(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!I(e)}const tt=T({name:"list",setup(){const{t:e}=v(),t=N(!1),n=N(),s=N({columns:[],tableWidth:z}),{data:i,changePage:l,changePageSize:r,deleteRecord:f,updateList:h}=A(),{getColumns:d}=$((p,m)=>{m==="edit"?(t.value=!0,n.value=p):f(p)}),_=()=>{n.value=null,t.value=!0};return L(()=>{l(1),s.value=d()}),O(v().locale,()=>{s.value=d()}),{t:e,showDetailModal:t,id:n,columns:s,...V(i),changePage:l,changePageSize:r,onCreate:_,onUpdatedList:h}},render(){const{t:e,id:t,showDetailModal:n,columns:s,list:i,page:l,pageSize:r,itemCount:f,loading:h,changePage:d,changePageSize:_,onCreate:p,onUpdatedList:m}=this;return a(M,null,[a(k,{title:""},{default:()=>{let y;return a("div",{class:u.conditions},[a(g,{onClick:p,type:"primary",class:"btn-create-data-source"},Y(y=e("datasource.create_datasource"))?y:{default:()=>[y]}),a(w,{class:u["conditions-search"],justify:"end",wrap:!1},{default:()=>[a("div",{class:u["conditions-search-input"]},[a(G,{value:this.searchVal,"onUpdate:value":P=>this.searchVal=P,placeholder:`${e("datasource.search_input_tips")}`},null)]),a(g,{type:"primary",onClick:m},{default:()=>[a(C,null,{default:()=>[a(H,null,null)]})]})]})])}}),a(k,{title:"",class:u["mt-8"]},{default:()=>[a(J,{"row-class-name":"data-source-items",columns:s.columns,data:i,loading:h,striped:!0,scrollX:s.tableWidth},null),a(X,{page:l,"page-size":r,"item-count":f,"show-quick-jumper":!0,"show-size-picker":!0,"page-sizes":[10,30,50],class:u.pagination,"on-update:page":d,"on-update:page-size":_},null)]}),a(b,{show:n,id:t,onCancel:()=>void(this.showDetailModal=!1),onUpdate:m},null)])}});export{tt as default};
