import{d as _,aj as w,u as N,a as c,o as b,c as u,bH as v,bl as C}from"./index.c5429249.js";import S from"./index.06a43514.js";import{e as j,u as D}from"./index.31c70196.js";import"./dag-toolbar.bce8bd3d.js";import"./dag.module.868c5c8a.js";import"./track.558e9151.js";import"./toNumber.5d1af176.js";import"./Popover.df2981b4.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./format-length.e7c2072e.js";import"./utils.3eee947a.js";import"./resolve-slot.7c241306.js";import"./use-compitable.b0459e69.js";import"./next-frame-once.da993024.js";import"./debounce.b14aac0d.js";import"./lodash.084a01e7.js";import"./index.075b615e.js";import"./dag-context-menu.87eb6a4b.js";import"./index.bdf8fa15.js";import"./service.0215c8a4.js";import"./common.145f2eef.js";import"./SettingOutlined.716a0298.js";import"./PauseCircleOutlined.813adbbb.js";import"./CloseCircleOutlined.46c86330.js";import"./CheckCircleOutlined.6daee0ce.js";import"./EditOutlined.af3970b8.js";import"./ClockCircleOutlined.6c97131a.js";import"./index.a2051d72.js";import"./Button.c43a24dc.js";import"./is-browser.d3e5def6.js";import"./use-rtl.c78ffbd8.js";import"./gForce.96ee147a.js";import"./use-text-copy.51199844.js";import"./use-message.f235e8f1.js";import"./dag-node-status.4be2745c.js";import"./Icon.8e3bf5ec.js";import"./Spin.1e9405a1.js";import"./index.16077d24.js";import"./Tooltip.d759bd4b.js";import"./task-node.0b2752c6.js";import"./dag-startup-param.21037cf7.js";import"./index.c537589f.js";import"./index.fd50cc71.js";import"./variables-view.f40e3ebd.js";import"./CopyOutlined.ff0f3037.js";import"./SearchOutlined.5b629110.js";import"./DownloadOutlined.8c21680b.js";import"./SyncOutlined.859a474f.js";import"./DeleteOutlined.e68b06d7.js";import"./FullscreenOutlined.135d7d35.js";import"./InfoCircleOutlined.9a8e087c.js";import"./Selection.a106a9c5.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";import"./text.6383fc2d.js";import"./Select.e833ee40.js";import"./fade-in-scale-up.cssr.05526022.js";import"./dag-canvas.d398f052.js";import"./dag-config.11d87af9.js";import"./dag-sidebar.2b0704d9.js";import"./task-type.1f698d1a.js";import"./dag-auto-layout-modal.c1130ec6.js";import"./index.20e11ec3.js";import"./index.3b9f9e63.js";import"./keysOf.963e6f6c.js";import"./Card.c707a1eb.js";import"./Space.e50db48f.js";import"./get-slot.c85d6606.js";/* empty css                 */import"./Form.13999875.js";import"./FormItem.51e71cc3.js";import"./RadioGroup.47f9a37a.js";import"./RadioButton.2ddd4a35.js";import"./InputNumber.d8a1dfa4.js";import"./Input.97d5419b.js";import"./Add.e846b00c.js";import"./detail-modal.30928b47.js";import"./detail.d1a94623.js";import"./get-elements-by-json.3336e937.js";import"./Grid.b73d23e7.js";import"./Radio.5a2a0c2a.js";import"./index.31fbc8bd.js";import"./Switch.9ad161ba.js";import"./Checkbox.7506e5f5.js";import"./TreeSelect.b9641da1.js";import"./ArrowUpOutlined.a96a5df0.js";import"./index.8ea7b56a.js";import"./index.bbd47aff.js";import"./index.cc06751b.js";import"./index.8259a597.js";import"./index.3b5bce66.js";import"./index.bbb6cfa3.js";import"./index.650fd948.js";import"./ProfileOutlined.be3098c4.js";import"./version-modal.cb9503da.js";import"./use-modal.4eacfaef.js";import"./index.5926f13f.js";import"./ExclamationCircleOutlined.e3fe8f60.js";import"./Popconfirm.83d41c5f.js";import"./index.module.e21b9b67.js";import"./DataTable.d85b2298.js";import"./ArrowDown.db19052e.js";import"./Dropdown.749e9383.js";import"./ChevronRight.f70a9c2d.js";import"./use-keyboard.22724d1e.js";import"./Forward.23552619.js";import"./dag-save-modal.494fac90.js";import"./index.d81654bf.js";import"./ButtonGroup.437137c8.js";import"./start-modal.0937a5b5.js";import"./DatePicker.fbb7ccb7.js";import"./index.fc8088f4.js";import"./throttle.754ed9e3.js";const I="_container_w4ea7_17",J="_dark_w4ea7_26",R="_light_w4ea7_31";var p={container:I,dark:J,light:R},Mo=_({name:"WorkflowInstanceDetails",setup(){const d=w(),e=v(),l=C(),{t:f}=N(),t=Number(e.params.projectCode),i=Number(e.params.id),a=c(),n=c(),s=()=>{j(i,t).then(o=>{n.value=o,o.dagData&&(a.value=o.dagData)})},g=({taskDefinitions:o,saveForm:r,connects:h,locations:y})=>{const k=r.globalParams.map(m=>({prop:m.key,value:m.value,direct:"IN",type:"VARCHAR"}));D({syncDefine:r.sync,globalParams:JSON.stringify(k),locations:JSON.stringify(y),taskDefinitionJson:JSON.stringify(o),taskRelationJson:JSON.stringify(h),tenantCode:r.tenantCode,timeout:r.timeoutFlag?r.timeout:0},i,t).then(m=>{window.$message.success(f("project.dag.success")),l.push({path:`/projects/${t}/workflow/instances`})})};return b(()=>{!i||!t||s()}),()=>u("div",{class:[p.container,d.darkTheme?p.dark:p.light]},[u(S,{instance:n.value,definition:a.value,onRefresh:s,projectCode:t,onSave:g},null)])}});export{Mo as default};
