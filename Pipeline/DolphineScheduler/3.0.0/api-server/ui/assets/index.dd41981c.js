import{u as g,r as w,a as p,h as l,bl as S,d as k,w as z,o as C,t as D,c as a,_ as v,B as R}from"./index.c5429249.js";import{C as _}from"./index.97f03277.js";import U from"./function-modal.09716a5f.js";import{u as P}from"./index.075b615e.js";import{p as T,r as V}from"./index.8259a597.js";import{D as O,C as r,c as W}from"./column-width-config.63466f21.js";import{E as F}from"./EditOutlined.af3970b8.js";import{D as L}from"./DeleteOutlined.e68b06d7.js";import{N}from"./Tooltip.d759bd4b.js";import{N as d}from"./Button.c43a24dc.js";import{N as j}from"./Popconfirm.83d41c5f.js";import{N as b}from"./Space.e50db48f.js";import{S as I}from"./SearchOutlined.5b629110.js";import{N as q}from"./Icon.8e3bf5ec.js";import{N as M}from"./Input.97d5419b.js";import{N as x,a as E}from"./DataTable.d85b2298.js";import"./Card.c707a1eb.js";import"./use-rtl.c78ffbd8.js";import"./resolve-slot.7c241306.js";import"./index.16077d24.js";import"./keysOf.963e6f6c.js";import"./index.20e11ec3.js";import"./index.3b9f9e63.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./fade-in-scale-up.cssr.05526022.js";import"./utils.3eee947a.js";import"./is-browser.d3e5def6.js";import"./lodash.084a01e7.js";import"./CloudUploadOutlined.2cbd7c1d.js";import"./Form.13999875.js";import"./FormItem.51e71cc3.js";import"./format-length.e7c2072e.js";import"./RadioGroup.47f9a37a.js";import"./get-slot.c85d6606.js";import"./Radio.5a2a0c2a.js";import"./InputGroup.dbcafa91.js";import"./TreeSelect.b9641da1.js";import"./Checkbox.7506e5f5.js";import"./Selection.a106a9c5.js";import"./Popover.df2981b4.js";import"./use-compitable.b0459e69.js";import"./next-frame-once.da993024.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";import"./Upload.6ed710a6.js";import"./Add.e846b00c.js";import"./Image.f79a9674.js";import"./service.0215c8a4.js";import"./ArrowDown.db19052e.js";import"./Dropdown.749e9383.js";import"./ChevronRight.f70a9c2d.js";import"./use-keyboard.22724d1e.js";import"./Select.e833ee40.js";import"./Forward.23552619.js";function B(){const{t:e}=g(),s=S(),t=w({columns:[],tableWidth:O,row:{},tableData:[],id:p(Number(s.currentRoute.value.params.id)||-1),page:p(1),pageSize:p(10),searchVal:p(),totalPage:p(1),showRef:p(!1),loadingRef:p(!1)}),o=i=>{i.columns=[{title:"#",key:"id",render:(c,u)=>u+1,...r.index},{title:e("resource.function.udf_function_name"),key:"funcName",...r.name},{title:e("resource.function.user_name"),...r.userName,key:"userName"},{title:e("resource.function.class_name"),key:"className",...r.name},{title:e("resource.function.type"),key:"type",...r.type},{title:e("resource.function.description"),key:"description",...r.note},{title:e("resource.function.jar_package"),key:"resourceName",...r.name},{title:e("resource.function.update_time"),key:"updateTime",...r.time},{title:e("resource.function.operation"),key:"operation",...r.operation(2),render:c=>l(b,null,{default:()=>[l(N,{},{trigger:()=>l(d,{circle:!0,type:"info",size:"tiny",class:"btn-edit",onClick:()=>{f(c)}},{icon:()=>l(F)}),default:()=>e("resource.function.edit")}),l(j,{onPositiveClick:()=>{h(c.id)}},{trigger:()=>l(N,{},{trigger:()=>l(d,{circle:!0,type:"error",size:"tiny",class:"btn-delete"},{icon:()=>l(L)}),default:()=>e("resource.function.delete")}),default:()=>e("resource.function.delete_confirm")})]})}],i.tableWidth&&(i.tableWidth=W(i.columns))},m=i=>{if(t.loadingRef)return;t.loadingRef=!0;const{state:c}=P(T({...i}).then(u=>{t.totalPage=u.totalPage,t.tableData=u.totalList.map(y=>({...y})),t.loadingRef=!1}),{total:0,table:[]});return c},f=i=>{t.showRef=!0,t.row=i},h=i=>{t.tableData.length===1&&t.page>1&&(t.page-=1),V(i).then(()=>m({id:t.id,pageSize:t.pageSize,pageNo:t.page,searchVal:t.searchVal}))};return{variables:t,createColumns:o,getTableData:m}}const A="_content_el425_17",G="_card_el425_20",H="_header_el425_23",X="_right_el425_29",J="_search_el425_29",K="_list_el425_29",Q="_table_el425_33",Y="_pagination_el425_53";var n={content:A,card:G,header:H,right:X,search:J,list:K,table:Q,pagination:Y};function Z(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!v(e)}var ot=k({name:"function-manage",setup(){const{variables:e,createColumns:s,getTableData:t}=B(),o=()=>{t({id:e.id,pageSize:e.pageSize,pageNo:e.page,searchVal:e.searchVal})},m=()=>{o()},f=()=>{e.page=1,o()},h=()=>{e.page=1,o()},i=u=>{u.value=!0},c=()=>{e.row={},i(R(e,"showRef"))};return z(g().locale,()=>{s(e)}),C(()=>{s(e),o()}),{requestData:o,handleSearch:h,handleUpdateList:m,handleCreateFolder:c,handleChangePageSize:f,...D(e)}},render(){let e;const{t:s}=g(),{loadingRef:t}=this;return a("div",{class:n.content},[a(_,{class:n.card},{default:()=>[a("div",{class:n.header},[a(b,null,{default:()=>[a(d,{type:"primary",onClick:this.handleCreateFolder,class:"btn-create-udf-function"},Z(e=s("resource.function.create_udf_function"))?e:{default:()=>[e]})]}),a("div",{class:n.right},[a("div",{class:n.search},[a("div",{class:n.list},[a(d,{type:"primary",onClick:this.handleSearch},{default:()=>[a(q,null,{default:()=>[a(I,null,null)]})]})]),a("div",{class:n.list},[a(M,{placeholder:s("resource.function.enter_keyword_tips"),value:this.searchVal,"onUpdate:value":o=>this.searchVal=o},null)])])])])]}),a(_,{title:s("resource.function.udf_function")},{default:()=>[a(x,{loading:t,columns:this.columns,data:this.tableData,striped:!0,size:"small",class:n.table,"row-class-name":"items",scrollX:this.tableWidth},null),a("div",{class:n.pagination},[a(E,{page:this.page,"onUpdate:page":o=>this.page=o,"page-size":this.pageSize,"onUpdate:page-size":o=>this.pageSize=o,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:this.requestData,onUpdatePageSize:this.handleChangePageSize},null)])]}),a(U,{row:this.row,"onUpdate:row":o=>this.row=o,show:this.showRef,"onUpdate:show":o=>this.showRef=o,onUpdateList:this.handleUpdateList},null)])}});export{ot as default};
