import{u,X as F,r as N,a as w,bl as h,d as b,w as g,t as C,c as o,bH as V,_ as y}from"./index.c5429249.js";import{u as _}from"./index.075b615e.js";import{v as j,n as S}from"./index.8259a597.js";import{C as x}from"./index.97f03277.js";import{M as E}from"./index.31fbc8bd.js";import{s as c}from"./index.module.9dd9e39b.js";import{N as U}from"./Form.13999875.js";import{N as k}from"./FormItem.51e71cc3.js";import{N as m}from"./Space.e50db48f.js";import{N as f}from"./Button.c43a24dc.js";import{N as I}from"./Spin.1e9405a1.js";import"./service.0215c8a4.js";import"./lodash.084a01e7.js";import"./Card.c707a1eb.js";import"./use-rtl.c78ffbd8.js";import"./resolve-slot.7c241306.js";import"./index.16077d24.js";import"./keysOf.963e6f6c.js";import"./format-length.e7c2072e.js";import"./fade-in.cssr.9da325c6.js";import"./is-browser.d3e5def6.js";import"./flatten.a7868693.js";import"./get-slot.c85d6606.js";import"./use-compitable.b0459e69.js";const p=()=>({content:""});function O(){const{t:e}=u(),r=()=>{t.fileForm=Object.assign(F(t.fileForm),p())},t=N({fileFormRef:w(),fileForm:p(),rules:{content:{required:!0,trigger:["input","blur"],validator(){if(t.fileForm.content==="")return new Error(e("resource.file.enter_content_tips"))}}}});return{state:t,resetForm:r}}function z(e){const{t:r}=u(),t=h();return{getResourceView:i=>_(j({skipLineNum:0,limit:3e3},i),{alias:"",content:""}),handleUpdateContent:i=>{e.fileFormRef.validate(async a=>{a||(await S({...e.fileForm},i),window.$message.success(r("resource.file.success")),t.go(-1))})}}}function d(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!y(e)}var ie=b({name:"ResourceFileEdit",setup(){const e=V(),r=h(),t=e.name,s=Number(e.params.id),{state:n}=O(),{getResourceView:i,handleUpdateContent:a}=z(n),R=()=>{n.fileForm.content=l.state.value.content,a(s)},v=()=>{r.go(-1)},l=i(s);return g(()=>l.state.value.content,()=>n.fileForm.content=l.state.value.content),{componentName:t,resourceViewRef:l,handleReturn:v,handleFileContent:R,...C(n)}},render(){let e,r;const{t}=u();return o(x,{title:t("resource.file.file_details")},{default:()=>[this.resourceViewRef.isReady.value?o("div",{class:c["file-edit-content"]},[o("h2",null,[o("span",null,[this.resourceViewRef.state.value.alias])]),o(U,{rules:this.rules,ref:"fileFormRef",class:c["form-content"],disabled:this.componentName!=="resource-file-edit"},{default:()=>[o(k,{path:"content"},{default:()=>[o(E,{value:this.resourceViewRef.state.value.content,"onUpdate:value":s=>this.resourceViewRef.state.value.content=s},null)]}),o(m,null,{default:()=>[o(f,{type:"info",size:"small",text:!0,style:{marginRight:"15px"},onClick:this.handleReturn,class:"btn-cancel"},d(e=t("resource.file.return"))?e:{default:()=>[e]}),this.componentName==="resource-file-edit"&&o(f,{type:"info",size:"small",round:!0,onClick:()=>this.handleFileContent(),class:"btn-submit"},d(r=t("resource.file.save"))?r:{default:()=>[r]})]})]})]):o(m,{justify:"center"},{default:()=>[o(I,{show:!0},null)]})]})}});export{ie as default};
