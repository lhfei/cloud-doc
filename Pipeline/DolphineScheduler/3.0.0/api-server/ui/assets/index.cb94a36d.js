import{u as q,r as D,a as n,h as z,d as S,o as v,t as R,c as t}from"./index.c5429249.js";import{u as C}from"./index.075b615e.js";import{q as k}from"./index.650fd948.js";import P from"./table-action.8f3045b4.js";import{_ as w}from"./lodash.084a01e7.js";import{p as y}from"./common.145f2eef.js";import{f as _}from"./index.a2051d72.js";import{C as M}from"./index.97f03277.js";import V from"./rule-modal.83677ae0.js";import{S as U}from"./SearchOutlined.5b629110.js";import{N as E,a as H}from"./DataTable.d85b2298.js";import{N as I}from"./Card.c707a1eb.js";import{N as L}from"./Space.e50db48f.js";import{N as j}from"./Input.97d5419b.js";import{N as A}from"./Button.c43a24dc.js";import{N as x}from"./Icon.8e3bf5ec.js";import"./service.0215c8a4.js";import"./Tooltip.d759bd4b.js";import"./Popover.df2981b4.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./format-length.e7c2072e.js";import"./utils.3eee947a.js";import"./resolve-slot.7c241306.js";import"./use-compitable.b0459e69.js";import"./next-frame-once.da993024.js";import"./InfoCircleFilled.46393fdc.js";import"./SettingOutlined.716a0298.js";import"./PauseCircleOutlined.813adbbb.js";import"./CloseCircleOutlined.46c86330.js";import"./CheckCircleOutlined.6daee0ce.js";import"./EditOutlined.af3970b8.js";import"./ClockCircleOutlined.6c97131a.js";import"./index.20e11ec3.js";import"./index.3b9f9e63.js";import"./keysOf.963e6f6c.js";import"./fade-in-scale-up.cssr.05526022.js";import"./is-browser.d3e5def6.js";import"./ArrowDown.db19052e.js";import"./index.16077d24.js";import"./Checkbox.7506e5f5.js";import"./use-rtl.c78ffbd8.js";import"./RadioGroup.47f9a37a.js";import"./get-slot.c85d6606.js";import"./Radio.5a2a0c2a.js";import"./Dropdown.749e9383.js";import"./ChevronRight.f70a9c2d.js";import"./Selection.a106a9c5.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";import"./use-keyboard.22724d1e.js";import"./Select.e833ee40.js";import"./Forward.23552619.js";function h(c=e=>{}){const{t:e}=q(),l=D({tableData:[],page:n(1),pageSize:n(10),state:n(null),searchVal:n(null),totalPage:n(1),loadingRef:n(!1)}),r=[{title:e("data_quality.rule.name"),key:"ruleName"},{title:e("data_quality.rule.type"),key:"ruleTypeName"},{title:e("data_quality.rule.username"),key:"userName"},{title:e("data_quality.rule.create_time"),key:"createTime"},{title:e("data_quality.rule.update_time"),key:"updateTime"},{title:e("data_quality.rule.actions"),key:"actions",width:150,render:o=>z(P,{row:o,onViewRuleEntry:u=>{c(u)}})}],p=[{code:-1,label:e("data_quality.rule.all")},{code:0,label:e("data_quality.rule.single_table")},{code:1,label:e("data_quality.rule.custom_sql")},{code:2,label:e("data_quality.rule.multi_table_accuracy")},{code:3,label:e("data_quality.rule.multi_table_value_comparison")}];return{t:e,variables:l,getTableData:o=>{if(l.loadingRef)return;l.loadingRef=!0;const u={pageSize:o.pageSize,pageNo:o.pageNo,searchVal:o.searchVal,startDate:o.startDate,endDate:o.endDate},{state:d}=C(k(u).then(m=>{l.totalPage=m.totalPage,l.tableData=m.totalList.map((a,i)=>{const N="data_quality.rule."+a.name.substring(3,a.name.length-1),T=e(N),g=w.find(p,{code:a.type});let f="";return g&&(f=g.label),a.createTime=_(y(a.createTime),"yyyy-MM-dd HH:mm:ss"),a.updateTime=_(y(a.updateTime),"yyyy-MM-dd HH:mm:ss"),{...a,ruleName:T,ruleTypeName:f}}),l.loadingRef=!1}),{});return d},columns:r}}const B="_pagination_10rs2_20";var b={"table-card":"_table-card_10rs2_17",pagination:B};const Fe=S({name:"rule",setup(){const{t:c,variables:e,getTableData:l}=h(),r=n(!1),p=n(""),s=()=>{l({pageSize:e.pageSize,pageNo:e.page,startDate:"",endDate:"",searchVal:e.searchVal})},o=()=>{e.page=1,s()},u=()=>{e.page=1,s()},d=()=>{r.value=!1},m=()=>{r.value=!1},a=i=>{r.value=!0,p.value=i};return v(()=>{s()}),{t:c,...R(e),requestTableData:s,onUpdatePageSize:o,showModalRef:r,onCancel:d,onConfirm:m,onSearch:u,ruleEntryData:p,viewRuleEntry:a}},render(){const{t:c,showModalRef:e,requestTableData:l,onUpdatePageSize:r,onSearch:p,onCancel:s,onConfirm:o,viewRuleEntry:u,ruleEntryData:d,loadingRef:m}=this,{columns:a}=h(u);return t("div",null,[t(I,null,{default:()=>[t(L,{justify:"end"},{default:()=>[t(j,{value:this.searchVal,"onUpdate:value":i=>this.searchVal=i,size:"small",placeholder:c("data_quality.rule.name"),clearable:!0},null),t(A,{size:"small",type:"primary",onClick:p},{icon:()=>t(x,null,{default:()=>[t(U,null,null)]})})]})]}),t(M,{class:b["table-card"]},{default:()=>[t(E,{loading:m,columns:a,data:this.tableData},null),t("div",{class:b.pagination},[t(H,{page:this.page,"onUpdate:page":i=>this.page=i,"page-size":this.pageSize,"onUpdate:page-size":i=>this.pageSize=i,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:l,onUpdatePageSize:r},null)])]}),e&&t(V,{show:e,onCancel:s,onConfirm:o,data:d},null)])}});export{Fe as default};
