import{u as w,r as N,a as v,bk as d,bl as S,ah as b,d as F,aj as y,t as L,c as o,bm as m,_ as P}from"./index.c5429249.js";import{a as h,s as k}from"./service.0215c8a4.js";import{g as C}from"./index.f239614a.js";import{u as R,a as U}from"./timezone.4b45fa52.js";import{u as z}from"./use-message.f235e8f1.js";import{N as I}from"./Switch.9ad161ba.js";import{N as T}from"./Form.13999875.js";import{N as c}from"./FormItem.51e71cc3.js";import{N as g}from"./Input.97d5419b.js";import{N as j}from"./Button.c43a24dc.js";import"./lodash.084a01e7.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./resolve-slot.7c241306.js";import"./index.16077d24.js";import"./keysOf.963e6f6c.js";import"./format-length.e7c2072e.js";import"./use-rtl.c78ffbd8.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";import"./is-browser.d3e5def6.js";const K="_container_2iues_17",V="_logo_2iues_37";var a={container:K,"language-switch":"_language-switch_2iues_25","login-model":"_login-model_2iues_30",logo:V,"logo-img":"_logo-img_2iues_43","form-model":"_form-model_2iues_49"};function x(){const{t:e,locale:s}=w(),t=N({loginFormRef:v(),loginForm:{userName:"",userPassword:""},rules:{userName:{trigger:["input","blur"],validator(){if(t.loginForm.userName==="")return new Error(e("login.userName_tips"))}},userPassword:{trigger:["input","blur"],validator(){if(t.loginForm.userPassword==="")return new Error(e("login.userPassword_tips"))}}}});return{state:t,t:e,locale:s}}function E(e){const s=d();return{handleChange:r=>{e.value=r,s.setLocales(r),h.set("language",e.value,{path:"/"})}}}function O(e){return k({url:"/login",method:"post",data:e})}function Z(e){const s=S(),t=b(),r=R(),i=U();return{handleLogin:()=>{e.loginFormRef.validate(async n=>{if(!n){const p=await O({...e.loginForm});await t.setSessionId(p.sessionId);const u=await C();await t.setUserInfo(u);const f=u.timeZone?u.timeZone:"UTC";await i.setTimezone(f);const _=r.lastRoute;s.push({path:_||"home"})}})}}}function $(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!P(e)}const me=F({name:"login",setup(){window.$message=z();const{state:e,t:s,locale:t}=x(),{handleChange:r}=E(t),{handleLogin:i}=Z(e),l=d(),n=y();return n.getTheme&&n.setDarkTheme(),h.set("language",l.getLocales,{path:"/"}),{t:s,handleChange:r,handleLogin:i,...L(e),localesStore:l}},render(){let e;return o("div",{class:a.container},[o("div",{class:a["language-switch"]},[o(I,{onUpdateValue:this.handleChange,"default-value":this.localesStore.getLocales,"checked-value":"en_US","unchecked-value":"zh_CN"},{checked:()=>"en_US",unchecked:()=>"zh_CN"})]),o("div",{class:a["login-model"]},[o("div",{class:a.logo},[o("div",{class:a["logo-img"]},null)]),o("div",{class:a["form-model"]},[o(T,{rules:this.rules,ref:"loginFormRef"},{default:()=>[o(c,{label:this.t("login.userName"),"label-style":{color:"black"},path:"userName"},{default:()=>[o(g,{class:"input-user-name",type:"text",size:"large",value:this.loginForm.userName,"onUpdate:value":s=>this.loginForm.userName=s,placeholder:this.t("login.userName_tips"),autofocus:!0,onKeydown:m(this.handleLogin,["enter"])},null)]}),o(c,{label:this.t("login.userPassword"),"label-style":{color:"black"},path:"userPassword"},{default:()=>[o(g,{class:"input-password",type:"password",size:"large",value:this.loginForm.userPassword,"onUpdate:value":s=>this.loginForm.userPassword=s,placeholder:this.t("login.userPassword_tips"),onKeydown:m(this.handleLogin,["enter"])},null)]})]}),o(j,{class:"btn-login",round:!0,type:"info",disabled:!this.loginForm.userName||!this.loginForm.userPassword,style:{width:"100%"},onClick:this.handleLogin},$(e=this.t("login.login"))?e:{default:()=>[e]})])])])}});export{me as default};
