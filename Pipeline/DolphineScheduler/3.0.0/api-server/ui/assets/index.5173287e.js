import{u as a,X as F,r as h,a as v,bl as g,d as w,t as C,c as t}from"./index.c5429249.js";import{M as N}from"./index.20e11ec3.js";import{n as _}from"./trim.f84c3e44.js";import{u as b}from"./file.0dabb2be.js";import{c as R}from"./index.8259a597.js";import{N as y}from"./Form.13999875.js";import{N as p}from"./FormItem.51e71cc3.js";import{N as d}from"./Input.97d5419b.js";import"./index.3b9f9e63.js";import"./Button.c43a24dc.js";import"./is-browser.d3e5def6.js";import"./use-rtl.c78ffbd8.js";import"./resolve-slot.7c241306.js";import"./keysOf.963e6f6c.js";import"./Card.c707a1eb.js";import"./index.16077d24.js";import"./index.3e01cddc.js";import"./flatten.a7868693.js";import"./Scrollbar.12b40993.js";import"./fade-in.cssr.9da325c6.js";import"./VResizeObserver.14b04bb7.js";import"./fade-in-scale-up.cssr.05526022.js";import"./utils.3eee947a.js";import"./Space.e50db48f.js";import"./get-slot.c85d6606.js";import"./service.0215c8a4.js";import"./lodash.084a01e7.js";import"./format-length.e7c2072e.js";import"./use-locale.be539345.js";import"./Suffix.9ee1fead.js";const u=()=>({pid:-1,type:"FILE",name:"",description:"",currentDir:"/"});function I(){const{t:e}=a(),r=()=>{o.folderForm=Object.assign(F(o.folderForm),u())},o=h({folderFormRef:v(),folderForm:u(),saving:!1,rules:{name:{required:!0,trigger:["input","blur"],validator(){if(o.folderForm.name==="")return new Error(e("resource.file.enter_name_tips"))}}}});return{state:o,resetForm:r}}function M(e){const{t:r}=a(),o=g(),i=b();return{handleCreateFolder:async(s,l,c)=>{if(await e.folderFormRef.validate(),!e.saving){e.saving=!0;try{const m=o.currentRoute.value.params.id||-1,f=i.getCurrentDir||"/";await R({...e.folderForm,pid:m,currentDir:f}),window.$message.success(r("resource.file.success")),e.saving=!1,s("updateList"),l(),c()}catch{e.saving=!1}}}}}const D={show:{type:Boolean,default:!1}};var ie=w({name:"ResourceFileFolder",props:D,emits:["updateList","update:show"],setup(e,r){const{state:o,resetForm:i}=I(),{handleCreateFolder:n}=M(o),s=()=>{r.emit("update:show")};return{hideModal:s,handleFolder:()=>{n(r.emit,s,i)},...C(o)}},render(){const{t:e}=a();return t(N,{show:this.$props.show,title:e("resource.file.create_folder"),onCancel:this.hideModal,onConfirm:this.handleFolder,confirmClassName:"btn-submit",cancelClassName:"btn-cancel",confirmLoading:this.saving},{default:()=>[t(y,{rules:this.rules,ref:"folderFormRef"},{default:()=>[t(p,{label:e("resource.file.folder_name"),path:"name"},{default:()=>[t(d,{allowInput:_,value:this.folderForm.name,"onUpdate:value":r=>this.folderForm.name=r,placeholder:e("resource.file.enter_name_tips"),class:"input-directory-name"},null)]}),t(p,{label:e("resource.file.description"),path:"description"},{default:()=>[t(d,{type:"textarea",value:this.folderForm.description,"onUpdate:value":r=>this.folderForm.description=r,placeholder:e("resource.file.enter_description_tips"),class:"input-description"},null)]})]})]})}});export{ie as default};
